"use strict";(self.webpackChunk_ima_docs=self.webpackChunk_ima_docs||[]).push([[7894],{6737:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"basic-features/routing/introduction","title":"Introduction","description":"Basic features > Routing >\xa0Introduction","source":"@site/../docs/basic-features/routing/introduction.md","sourceDirName":"basic-features/routing","slug":"/basic-features/routing/introduction","permalink":"/basic-features/routing/introduction","draft":false,"unlisted":false,"editUrl":"https://github.com/seznam/ima/tree/master/docs/../docs/basic-features/routing/introduction.md","tags":[],"version":"current","lastUpdatedBy":"Jan \u0160ime\u010dek","lastUpdatedAt":1761308686000,"frontMatter":{"title":"Introduction","description":"Basic features > Routing >\xa0Introduction"},"sidebar":"docs","previous":{"title":"Data fetching","permalink":"/basic-features/data-fetching"},"next":{"title":"Dynamic Routes","permalink":"/basic-features/routing/dynamic-routes"}}');var i=r(2540),o=r(3023);const s={title:"Introduction",description:"Basic features > Routing >\xa0Introduction"},d=void 0,a={},l=[{value:"Setting up Router",id:"setting-up-router",level:2},{value:"name",id:"name",level:3},{value:"pathExpression",id:"pathexpression",level:3},{value:"controller",id:"controller",level:3},{value:"view",id:"view",level:3},{value:"options",id:"options",level:3},{value:"onlyUpdate",id:"onlyupdate",level:4},{value:"autoScroll",id:"autoscroll",level:4},{value:"allowSPA",id:"allowspa",level:4},{value:"documentView",id:"documentview",level:4},{value:"managedRootView",id:"managedrootview",level:4},{value:"viewAdapter",id:"viewadapter",level:4},{value:"middlewares",id:"middlewares",level:4},{value:"Route params substitutions",id:"route-params-substitutions",level:2},{value:"Optional parameters",id:"optional-parameters",level:3},{value:"Linking between routes",id:"linking-between-routes",level:2},{value:"Generating links outside of app components",id:"generating-links-outside-of-app-components",level:3},{value:"Error and NotFound route names",id:"error-and-notfound-route-names",level:2},{value:"Redirects",id:"redirects",level:2},{value:"Method signature",id:"method-signature",level:3},{value:"url",id:"url",level:3},{value:"options",id:"options-1",level:3},{value:"httpStatus",id:"httpstatus",level:4},{value:"headers",id:"headers",level:4},{value:"Custom client router listener root element",id:"custom-client-router-listener-root-element",level:2}];function c(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Routing is an essential part of every application that displays multiple pages. It allows to develop each part of an application separately and add new parts instantly. As it happens to be in MVC frameworks, each route targets specific controller which takes control over what happens next after a route is matched."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:r(5050).A+"",width:"881",height:"421"})}),"\n",(0,i.jsx)(n.h2,{id:"setting-up-router",children:"Setting up Router"}),"\n",(0,i.jsxs)(n.p,{children:["All routes in IMA.js are registered inside the ",(0,i.jsx)(n.code,{children:"init"})," function in ",(0,i.jsx)(n.code,{children:"app/config/routes.js"}),". Same ",(0,i.jsx)(n.code,{children:"init"})," function can be found in ",(0,i.jsx)(n.code,{children:"app/config/bind.js"}),". See ",(0,i.jsx)(n.a,{href:"/basic-features/object-container",children:"Object Container"})," documentation for more information about the ",(0,i.jsx)(n.code,{children:"oc.get()"})," function."]}),"\n",(0,i.jsxs)(n.p,{children:["Usually you should be oke with simple string defined ",(0,i.jsx)(n.a,{href:"../../api/classes/ima_core.StaticRoute.md",children:"StaticRoutes"})," (the ones defined below), but the router also has support for more advanced and powerful ",(0,i.jsx)(n.a,{href:"../../api/classes/ima_core.DynamicRoute.md",children:"DynamicRoutes"}),". For more information about these see the ",(0,i.jsx)(n.a,{href:"/basic-features/routing/dynamic-routes",children:"next section"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",metastring:"title=./app/config/routes.js",children:"import { RouteNames } from '@ima/core';\n\nimport HomeController from 'app/page/home/HomeController';\nimport HomeView from 'app/page/home/HomeView';\n\nexport let init = (ns, oc, config) => {\n  const router = oc.get('$Router');\n\n  router\n    .add('home', '/', HomeController, HomeView)\n    .add(RouteNames.ERROR, '/error', ErrorController, ErrorView)\n    .add(RouteNames.NOT_FOUND, '/not-found', NotFoundController, NotFoundView);\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The router ",(0,i.jsx)(n.code,{children:"add"})," method has following signature:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"add(name, pathExpression, controller, view, options = undefined);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"name",children:"name"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"string"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This argument represents ",(0,i.jsx)(n.strong,{children:"unique route name"}),". You can use this name when ",(0,i.jsx)(n.a,{href:"/basic-features/routing/introduction#linking-between-routes",children:"linking between routes"})," or getting the ",(0,i.jsx)(n.code,{children:"route"})," instance using ",(0,i.jsx)(n.code,{children:"getRouteHandler()"})," method."]}),"\n",(0,i.jsx)(n.h3,{id:"pathexpression",children:"pathExpression"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"string | object"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This can be either ",(0,i.jsx)(n.code,{children:"object"})," for ",(0,i.jsx)(n.a,{href:"/basic-features/routing/dynamic-routes",children:"dynamic routes"})," or ",(0,i.jsx)(n.code,{children:"string"})," representing route path. The pathExpression supports **",(0,i.jsx)(n.a,{href:"/basic-features/routing/introduction#route-params-substitutions",children:"parameter substitutions"})]}),"\n",(0,i.jsx)(n.h3,{id:"controller",children:"controller"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"string | function"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Route assigned ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/basic-features/controller-lifecycle",children:"Controller"})})," class (can be a string alias, referring to the controller registered in the ",(0,i.jsx)(n.a,{href:"/basic-features/object-container",children:"Object Container"}),"). It goes through its full ",(0,i.jsx)(n.a,{href:"/basic-features/controller-lifecycle",children:"lifecycle"})," and renders the ",(0,i.jsx)(n.a,{href:"/basic-features/views-and-components",children:"View"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"view",children:"view"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"string | function"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Route assigned ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/basic-features/views-and-components",children:"View"})})," class (also can be a string alias, referring to the view registered in the ",(0,i.jsx)(n.a,{href:"/basic-features/object-container",children:"Object Container"}),"). Rendered by the route controller."]}),"\n",(0,i.jsx)(n.h3,{id:"options",children:"options"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"object = undefined"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"These are optional, however it accepts object with following properties and their respective defaults:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"{\n  onlyUpdate: false,\n  autoScroll: true,\n  allowSPA: true,\n  documentView: null,\n  managedRootView: null,\n  viewAdapter: null,\n  middlewares: []\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"onlyupdate",children:"onlyUpdate"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"boolean | function = false"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["When only the parameters of the current route change an ",(0,i.jsxs)(n.a,{href:"/basic-features/controller-lifecycle#update-client",children:[(0,i.jsx)(n.code,{children:"update"})," method"]})," of the active controller will be invoked instead of re-instantiating the controller and view. The ",(0,i.jsx)(n.code,{children:"update"})," method receives ",(0,i.jsx)(n.code,{children:"prevParams"})," object containing - as the name suggests - previous route parameters."]}),"\n",(0,i.jsxs)(n.p,{children:["If you provide function to the ",(0,i.jsx)(n.code,{children:"onlyUpdate"})," option; it receives 2 arguments (instances of previous ",(0,i.jsx)(n.strong,{children:"controller"})," and ",(0,i.jsx)(n.strong,{children:"view"}),") and it should return ",(0,i.jsx)(n.strong,{children:"boolean"}),"."]}),"\n",(0,i.jsx)(n.h4,{id:"autoscroll",children:"autoScroll"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"boolean = true"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Determines whether the page should be ",(0,i.jsx)(n.strong,{children:"scrolled to the top"})," when the navigation occurs."]}),"\n",(0,i.jsx)(n.h4,{id:"allowspa",children:"allowSPA"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"boolean = true"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Can be used to make the route to be always served from the server and never using the SPA (when disabled) even if the server is overloaded."}),"\n",(0,i.jsxs)(n.p,{children:["This is useful for routes that use different document views (specified by the ",(0,i.jsx)(n.code,{children:"documentView"})," option), for example for rendering the content of iframes."]}),"\n",(0,i.jsx)(n.h4,{id:"documentview",children:"documentView"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"AbstractDocumentView = null"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Custom ",(0,i.jsx)(n.a,{href:"/basic-features/rendering-process#documentview",children:"DocumentView"}),", should extend the ",(0,i.jsx)(n.code,{children:"AbstractDocumentView"})," from ",(0,i.jsx)(n.code,{children:"@ima/core"}),"."]}),"\n",(0,i.jsx)(n.h4,{id:"managedrootview",children:"managedRootView"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"function = null"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Custom ",(0,i.jsx)(n.code,{children:"ManagedRootView"})," component, for more information see ",(0,i.jsx)(n.a,{href:"/basic-features/rendering-process#managedrootview",children:"rendering process"}),"."]}),"\n",(0,i.jsx)(n.h4,{id:"viewadapter",children:"viewAdapter"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"function = null"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Custom ",(0,i.jsx)(n.code,{children:"ViewAdapter"})," component, for more information see ",(0,i.jsx)(n.a,{href:"/basic-features/rendering-process#viewadapter",children:"rendering process"}),"."]}),"\n",(0,i.jsx)(n.h4,{id:"middlewares",children:"middlewares"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"function[] = []"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Array of route-specific middlewares. See the ",(0,i.jsx)(n.a,{href:"/basic-features/routing/middlewares",children:"middlewares"})," section for more information."]}),"\n",(0,i.jsx)(n.h2,{id:"route-params-substitutions",children:"Route params substitutions"}),"\n",(0,i.jsxs)(n.p,{children:["The parameter name can contain only letters ",(0,i.jsx)(n.code,{children:"a-zA-Z"}),", numbers ",(0,i.jsx)(n.code,{children:"0-9"}),", underscores ",(0,i.jsx)(n.code,{children:"_"})," and hyphens ",(0,i.jsx)(n.code,{children:"-"})," and is preceded by colon ",(0,i.jsx)(n.code,{children:":"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"router.add(\n  'order-detail',\n  // highlight-next-line\n  '/user/:userId/orders/:orderId',\n  OrderController,\n  OrderView\n);\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"userId"})," and ",(0,i.jsx)(n.code,{children:"orderId"})," parameters are then accessible in ",(0,i.jsx)(n.code,{children:"OrderController"})," via ",(0,i.jsx)(n.code,{children:"this.params"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"import { AbstractController } from '@ima/core';\n\nclass OrderController extends AbstractController {\n  load() {\n    // highlight-next-line\n    const userPromise = this._userService.get(this.params.userId);\n    // highlight-next-line\n    const orderPromise = this._orderService.get(this.params.orderId);\n\n    return {\n      user: userPromise,\n      order: orderPromise\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"optional-parameters",children:"Optional parameters"}),"\n",(0,i.jsxs)(n.p,{children:["Parameters can also be marked as ",(0,i.jsx)(n.strong,{children:"optional"})," by placing question mark ",(0,i.jsx)(n.code,{children:"?"})," after the colon ",(0,i.jsx)(n.code,{children:":"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"router.add(\n  'user-detail',\n  // highlight-next-line\n  '/profile/:?userId',\n  UserController,\n  UserView\n);\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["Optional parameters can be ",(0,i.jsx)(n.strong,{children:"placed only after the last slash"}),". Doing otherwise can cause unexpected behavior."]})}),"\n",(0,i.jsx)(n.h2,{id:"linking-between-routes",children:"Linking between routes"}),"\n",(0,i.jsxs)(n.p,{children:["URLs to routes can be generated via the ",(0,i.jsx)(n.code,{children:"Router.link()"})," public method. These can be then used in ordinary anchor tags and IMA.js makes sure, ",(0,i.jsx)(n.strong,{children:"to handle the site routing in SPA mode"}),", rather than doing redirect/reload of the whole page."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"import { AbstractComponent } from '@ima/react-page-renderer';\n\nclass OrderView extends AbstractComponent {\n  render() {\n    const { user, order } = this.props;\n\n    const orderLink = this.link('order-detail', {\n      userId: user.id,\n      orderId: order.id\n    });\n\n    return <a href={orderLink}>View order</a>\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This is done by listening to window ",(0,i.jsx)(n.code,{children:"popstate"})," and ",(0,i.jsx)(n.code,{children:"click"})," events and reacting accordingly (in the ",(0,i.jsx)(n.code,{children:"listen"})," method of ",(0,i.jsx)(n.a,{href:"https://github.com/seznam/ima/blob/next/packages/core/src/router/ClientRouter.js#L113",children:"ClientRouter"}),", which is called by IMA.js on client during app init). If the handled URL is not valid registered app route, it is handled normally (e.g you are redirected to the target URL)."]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["You can use ",(0,i.jsx)(n.code,{children:"this.link"})," helper method in IMA.js abstract component or the ",(0,i.jsx)(n.code,{children:"useLink"})," hook from the ",(0,i.jsx)(n.a,{href:"https://github.com/seznam/IMA.js-plugins/tree/master/packages/react-hooks",children:"@ima/react-hooks"})," plugin in your components and views to generate router links."]})}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsxs)(n.p,{children:["Under the hood, ",(0,i.jsx)(n.code,{children:"this.link()"})," is only alias for ",(0,i.jsx)(n.code,{children:"this.utils.$Router.link"}),", where  ",(0,i.jsx)(n.code,{children:"this.utils"})," is taken from ",(0,i.jsx)(n.code,{children:"this.context.$Utils"}),"."]}),(0,i.jsxs)(n.p,{children:["For more information about ",(0,i.jsx)(n.code,{children:"this.utils"})," and ",(0,i.jsx)(n.code,{children:"$Utils"})," objects, take a look at the ",(0,i.jsx)(n.a,{href:"/basic-features/rendering-process#react-context",children:"React Context"})," in the documentation."]})]}),"\n",(0,i.jsx)(n.h3,{id:"generating-links-outside-of-app-components",children:"Generating links outside of app components"}),"\n",(0,i.jsxs)(n.p,{children:["Linking in ",(0,i.jsx)(n.strong,{children:"Controllers"}),", ",(0,i.jsx)(n.strong,{children:"Extensions"}),", ",(0,i.jsx)(n.strong,{children:"Helpers"})," and other ",(0,i.jsx)(n.a,{href:"/basic-features/object-container",children:"Object Container"})," classes requires you to import ",(0,i.jsx)(n.code,{children:"Router"})," using ",(0,i.jsx)(n.a,{href:"/basic-features/object-container#1-dependency-injection",children:"dependency injection"}),". To do that you can either use ",(0,i.jsx)(n.code,{children:"Router"})," class in the dependency array, or ",(0,i.jsx)(n.code,{children:"$Router"})," string alias:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"import { AbstractController } from '@ima/core';\n\nexport default class DetailController extends AbstractController {\n  static get $dependencies() {\n    return ['$Router'];\n  }\n\n  constructor(router) {\n    this._router = router;\n  }\n\n  load() {\n    // ...\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Then you get ",(0,i.jsx)(n.code,{children:"Router"})," instance as the constructor's first argument, which gives you access to it's ",(0,i.jsx)(n.code,{children:"link"})," public method (and many others), that you can use to generate your desired route URL:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"load() {\n  const detailLink = this._router.link('order-detail', {\n    userId: user.id,\n    orderId: order.id\n  });\n\n  return { detailLink };\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"error-and-notfound-route-names",children:"Error and NotFound route names"}),"\n",(0,i.jsxs)(n.p,{children:["There are two special route names that ",(0,i.jsx)(n.code,{children:"@ima/core"})," exports: ",(0,i.jsx)(n.code,{children:"RouteNames.ERROR"}),", ",(0,i.jsx)(n.code,{children:"RouteNames.NOT_FOUND"}),". You can use these constants to provide custom views and controllers for error handling pages."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",metastring:"title=./app/config/routes.js",children:"import { RouteNames } from '@ima/core';\n\nimport { ErrorController, ErrorView } from 'app/page/error';\nimport { NotFoundController, NotFoundView } from 'app/page/not-found';\n\nexport let init = (ns, oc, config) => {\n  const router = oc.get('$Router');\n\n  router\n    .add('home', '/', HomeController, HomeView)\n    .add(RouteNames.ERROR, '/error', ErrorController, ErrorView)\n    .add(RouteNames.NOT_FOUND, '/not-found', NotFoundController, NotFoundView);\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"redirects",children:"Redirects"}),"\n",(0,i.jsxs)(n.p,{children:["In addition to the ",(0,i.jsx)(n.code,{children:"link"})," method mentioned above (which handles URL generation for given routes), you can use ",(0,i.jsx)(n.code,{children:"Router.redirect()"})," method to ",(0,i.jsx)(n.strong,{children:"redirect directly to the targeted URL"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"This URL can be either existing app route or external URL. As with links, in this case you also get SPA routing, in case of redirection to different IMA.js app route."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"import { AbstractController, Router } from '@ima/core';\n\nexport default class DetailController extends AbstractController {\n  static get $dependencies() {\n    return [\n      Router // We're using class descriptor in this case for DI\n    ];\n  }\n\n  constructor(router) {\n    this._router = router;\n  }\n\n  init() {\n      // highlight-next-line\n    this._router.redirect(\n      // highlight-next-line\n      this._router.link('order-detail', {\n      // highlight-next-line\n        userId: user.id,\n      // highlight-next-line\n        orderId: order.id\n      // highlight-next-line\n      });\n      // highlight-next-line\n    );\n  }\n}\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["On client side, redirections are handled by simply changing the ",(0,i.jsx)(n.code,{children:"window.location.href"}),", while on server you're using the express native ",(0,i.jsx)(n.code,{children:"res.redirect"})," method."]})}),"\n",(0,i.jsx)(n.h3,{id:"method-signature",children:"Method signature"}),"\n",(0,i.jsxs)(n.p,{children:["The redirect method has following signature, while the options object is ",(0,i.jsx)(n.strong,{children:"available only on server side"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"redirect(\n  url = '',\n  options = {} // Available only on server side\n)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"url",children:"url"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"string"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Target redirect URL."}),"\n",(0,i.jsx)(n.h3,{id:"options-1",children:"options"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"object = {}"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Additional options, used to customize redirect server response."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"{\n  httpStatus: 302,\n  headers: undefined,\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"httpstatus",children:"httpStatus"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"number = 302"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Custom redirect http status code."}),"\n",(0,i.jsx)(n.h4,{id:"headers",children:"headers"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"object = undefined"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Custom response headers."}),"\n",(0,i.jsx)(n.h2,{id:"custom-client-router-listener-root-element",children:"Custom client router listener root element"}),"\n",(0,i.jsxs)(n.p,{children:["By default, the router listens for navigation events (clicks on links and browser history changes) on the window object. However, you can also specify custom elements to listen on within the initialization function in ",(0,i.jsx)(n.code,{children:"main.js"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"ima\n  .onLoad()\n  .then(() => {\n    // Listen for navigation events within specific elements\n    const appRoot = document.querySelector('#my-app-root');\n\n    ima.reviveClientApp(getInitialAppConfigFunctions(), appRoot);\n  })\n  .catch(error => {\n    if ($Debug && typeof window !== 'undefined') {\n      window.__IMA_HMR?.emitter?.emit('error', { error });\n      console.error(error);\n    }\n  });\n"})}),"\n",(0,i.jsx)(n.p,{children:"This is particularly useful when you want to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Scope navigation handling to specific parts of your application"}),"\n",(0,i.jsx)(n.li,{children:"Have multiple independent routed sections on a page"}),"\n",(0,i.jsx)(n.li,{children:"Integrate IMA.js routing into an existing application"}),"\n",(0,i.jsx)(n.li,{children:"Handle routing in modals or other isolated UI components"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The router will handle clicks on links (",(0,i.jsx)(n.code,{children:"<a>"})," elements) and popstate events within the specified elements, while ignoring navigation events outside of them. You can add multiple listener roots and manage them independently."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["When cleaning up your application (for example during unmounting) in a non-standard way, make sure to call ",(0,i.jsx)(n.code,{children:"unlistenAll()"})," to properly remove all event listeners. In the default state the  ",(0,i.jsx)(n.code,{children:"unlistenAll()"})," method is called automatically when the instance is destroyed."]})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},5050:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/diagram-router-683726941d228a587bbf7ffda06d3c45.png"},3023:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>d});var t=r(3696);const i={},o=t.createContext(i);function s(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);