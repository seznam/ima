"use strict";(globalThis.webpackChunk_ima_docs=globalThis.webpackChunk_ima_docs||[]).push([[557],{2939:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"migration/migration-20.0.0","title":"Migration 20.0.0","description":"Migration > Migration to version 20.0.0","source":"@site/../docs/migration/migration-20.0.0.md","sourceDirName":"migration","slug":"/migration/migration-20.0.0","permalink":"/migration/migration-20.0.0","draft":false,"unlisted":false,"editUrl":"https://github.com/seznam/ima/tree/master/docs/../docs/migration/migration-20.0.0.md","tags":[],"version":"current","lastUpdatedBy":"Miroslav Jancarik","lastUpdatedAt":1768494421000,"frontMatter":{"title":"Migration 20.0.0","description":"Migration > Migration to version 20.0.0"},"sidebar":"docs","previous":{"title":"Migration 19.0.0","permalink":"/migration/migration-19.0.0"},"next":{"title":"How to Contribute","permalink":"/contributing/how-to-contribute"}}');var s=r(2540),t=r(3023);const a={title:"Migration 20.0.0",description:"Migration > Migration to version 20.0.0"},o="Migration from 19.x.x to 20.0.0",l={},d=[{value:"What&#39;s New in IMA.js 20? \ud83c\udf89",id:"whats-new-in-imajs-20-",level:2},{value:"Modern JavaScript Standards (ES2024)",id:"modern-javascript-standards-es2024",level:3},{value:"Asynchronous Application Bootstrap",id:"asynchronous-application-bootstrap",level:3},{value:"JSON Controllers &amp; Server-Only Code",id:"json-controllers--server-only-code",level:3},{value:"Advanced Performance Tracking",id:"advanced-performance-tracking",level:3},{value:"SPA Prefetch Mode",id:"spa-prefetch-mode",level:3},{value:"Enhanced Security",id:"enhanced-security",level:3},{value:"Simplified Configuration",id:"simplified-configuration",level:3},{value:"updated dependencies",id:"updated-dependencies",level:3},{value:"Migration Guide",id:"migration-guide",level:2},{value:"1. Update Dependencies",id:"1-update-dependencies",level:3},{value:"2. Update Node.js &amp; Build Tools",id:"2-update-nodejs--build-tools",level:3},{value:"3. Update Target Environment (ES2024)",id:"3-update-target-environment-es2024",level:3},{value:"Update <code>tsconfig.json</code>:",id:"update-tsconfigjson",level:4},{value:"Update <code>.eslintrc.js</code>:",id:"update-eslintrcjs",level:4},{value:"Update <code>jest.config.js</code> (if using SWC):",id:"update-jestconfigjs-if-using-swc",level:4},{value:"4. Async Bootstrap Changes \u26a0\ufe0f BREAKING",id:"4-async-bootstrap-changes-\ufe0f-breaking",level:3},{value:"Update client entry points",id:"update-client-entry-points",level:4},{value:"5. Add Required Server Template: overloaded.ejs \u26a0\ufe0f BREAKING",id:"5-add-required-server-template-overloadedejs-\ufe0f-breaking",level:3},{value:"Create the overloaded.ejs template",id:"create-the-overloadedejs-template",level:4},{value:"Custom template path (optional)",id:"custom-template-path-optional",level:4},{value:"Understanding the degradation flow",id:"understanding-the-degradation-flow",level:4},{value:"Required template files summary",id:"required-template-files-summary",level:4},{value:"6. Remove <code>$IMA.$Path</code> \u26a0\ufe0f BREAKING",id:"6-remove-imapath-\ufe0f-breaking",level:3},{value:"Remove from settings files:",id:"remove-from-settings-files",level:4},{value:"Remove from DocumentView/spa.ejs:",id:"remove-from-documentviewspaejs",level:4},{value:"7. Update Environment Configuration \u26a0\ufe0f BREAKING",id:"7-update-environment-configuration-\ufe0f-breaking",level:3},{value:"Review and simplify <code>server/config/environment.js</code>:",id:"review-and-simplify-serverconfigenvironmentjs",level:4},{value:"Review and simplify <code>app/config/settings.js</code>:",id:"review-and-simplify-appconfigsettingsjs",level:4},{value:"8. Update Degradation Configuration \u26a0\ufe0f BREAKING",id:"8-update-degradation-configuration-\ufe0f-breaking",level:3},{value:"Old configuration (removed):",id:"old-configuration-removed",level:4},{value:"New configuration:",id:"new-configuration",level:4},{value:"9. Update <code>@ima/plugin-cli</code> Watch Paths \u26a0\ufe0f BREAKING",id:"9-update-imaplugin-cli-watch-paths-\ufe0f-breaking",level:3},{value:"Update <code>ima-plugin.config.js</code>:",id:"update-ima-pluginconfigjs",level:4},{value:"Optional: New Features to Adopt",id:"optional-new-features-to-adopt",level:2},{value:"JSON Controllers with &#39;use server&#39;",id:"json-controllers-with-use-server",level:3},{value:"Performance Timing Tracking",id:"performance-timing-tracking",level:3},{value:"SPA Prefetch Mode",id:"spa-prefetch-mode-1",level:3},{value:"Full List of Breaking Changes",id:"full-list-of-breaking-changes",level:2},{value:"Global",id:"global",level:3},{value:"@ima/core",id:"imacore",level:3},{value:"@ima/server",id:"imaserver",level:3},{value:"@ima/react-page-renderer",id:"imareact-page-renderer",level:3},{value:"@ima/cli",id:"imacli",level:3},{value:"@ima/plugin-cli",id:"imaplugin-cli",level:3},{value:"create-ima-app",id:"create-ima-app",level:3},{value:"Full List of New Features &amp; Improvements",id:"full-list-of-new-features--improvements",level:2},{value:"@ima/core",id:"imacore-1",level:3},{value:"@ima/server",id:"imaserver-1",level:3},{value:"@ima/cli",id:"imacli-1",level:3},{value:"@ima/react-page-renderer",id:"imareact-page-renderer-1",level:3},{value:"@ima/testing-library",id:"imatesting-library",level:3},{value:"create-ima-app",id:"create-ima-app-1",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"migration-from-19xx-to-2000",children:"Migration from 19.x.x to 20.0.0"})}),"\n",(0,s.jsxs)(n.p,{children:["IMA.js 20 is a significant release that brings ",(0,s.jsx)(n.strong,{children:"major improvements to performance, developer experience, and modern JavaScript standards"}),". This release focuses on modernizing the framework, improving server-side capabilities, and providing better tools for building high-performance applications."]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"This is a major release"})," with several breaking changes. While most applications can migrate with minimal changes, some features have been removed or redesigned for security and performance reasons. Please read through the breaking changes carefully before upgrading."]})}),"\n",(0,s.jsx)(n.h2,{id:"whats-new-in-imajs-20-",children:"What's New in IMA.js 20? \ud83c\udf89"}),"\n",(0,s.jsx)(n.h3,{id:"modern-javascript-standards-es2024",children:"Modern JavaScript Standards (ES2024)"}),"\n",(0,s.jsxs)(n.p,{children:["IMA.js 20 now targets ",(0,s.jsx)(n.strong,{children:"ES2024"})," (previously ES2022), bringing support for the latest JavaScript features and improvements. This includes:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Native ",(0,s.jsx)(n.code,{children:"Promise.withResolvers()"})," support"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Object.groupBy()"})," for efficient data grouping"]}),"\n",(0,s.jsx)(n.li,{children:"Latest ECMAScript features for better performance"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"asynchronous-application-bootstrap",children:"Asynchronous Application Bootstrap"}),"\n",(0,s.jsxs)(n.p,{children:["The entire application bootstrap process has been refactored to be ",(0,s.jsx)(n.strong,{children:"fully asynchronous"}),", enabling:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Better performance metrics"}),"\n",(0,s.jsx)(n.li,{children:"More reliable server startup"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"json-controllers--server-only-code",children:"JSON Controllers & Server-Only Code"}),"\n",(0,s.jsxs)(n.p,{children:["A powerful new feature for building ",(0,s.jsx)(n.strong,{children:"API endpoints within your IMA application"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Direct JSON responses from controllers using ",(0,s.jsx)(n.code,{children:"$responseType = 'json'"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.code,{children:"'use server'"})," directive"]})," to mark server-only code"]}),"\n",(0,s.jsx)(n.li,{children:"Automatic stripping of server code from client bundles"}),"\n",(0,s.jsx)(n.li,{children:"Reduced bundle sizes and improved security"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"'use server';\n\nexport default class ApiController extends AbstractController {\n  static $responseType = 'json';\n\n  async load() {\n    return { data: 'JSON response!' };\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"/basic-features/json-controllers",children:"Learn more about JSON Controllers \u2192"})}),"\n",(0,s.jsx)(n.h3,{id:"advanced-performance-tracking",children:"Advanced Performance Tracking"}),"\n",(0,s.jsxs)(n.p,{children:["New ",(0,s.jsx)(n.strong,{children:"TimingTracker"})," system for monitoring and optimizing server-side performance:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Automatic tracking of all IMA server events"}),"\n",(0,s.jsx)(n.li,{children:"Visual timeline of request processing"}),"\n",(0,s.jsx)(n.li,{children:"Slow operation detection"}),"\n",(0,s.jsx)(n.li,{children:"APM integration (Datadog, New Relic, etc.)"}),"\n",(0,s.jsx)(n.li,{children:"Zero overhead when disabled"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"instrumentEmitterWithTimings(emitter, {\n  enabled: true,\n  logToConsole: true,\n  slowThreshold: 50,\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:r(9035).A+"",width:"1510",height:"2170"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"/server/timing-tracking",children:"Learn more about Timing Tracking \u2192"})}),"\n",(0,s.jsx)(n.h3,{id:"spa-prefetch-mode",children:"SPA Prefetch Mode"}),"\n",(0,s.jsxs)(n.p,{children:["New rendering mode that enables ",(0,s.jsx)(n.strong,{children:"fast client-side navigation"})," while maintaining SSR benefits:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Server sends minimal HTML shell"}),"\n",(0,s.jsx)(n.li,{children:"Client boots using data from cache sent from server along with the HTML"}),"\n",(0,s.jsx)(n.li,{children:"Combines SSR reliability with SPA speed"}),"\n",(0,s.jsx)(n.li,{children:"Configurable per-request using degradation functions"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"enhanced-security",children:"Enhanced Security"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Removed ",(0,s.jsx)(n.code,{children:"$IMA.$Path"})," (security risk - exposed application file paths)"]}),"\n",(0,s.jsx)(n.li,{children:"Better XSS protection in revival settings"}),"\n",(0,s.jsx)(n.li,{children:"Improved sanitization of server data"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"simplified-configuration",children:"Simplified Configuration"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Most default settings moved from template to core"})," (",(0,s.jsx)(n.a,{href:"https://github.com/seznam/ima/pull/621",children:"PR #621"}),"), meaning:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Less boilerplate in new projects (~100 lines of config removed from templates)"}),"\n",(0,s.jsxs)(n.li,{children:["Sensible defaults out-of-the-box for ",(0,s.jsx)(n.code,{children:"$Http"}),", ",(0,s.jsx)(n.code,{children:"$Cache"}),", ",(0,s.jsx)(n.code,{children:"$Router"}),", and ",(0,s.jsx)(n.code,{children:"$Server"})]}),"\n",(0,s.jsx)(n.li,{children:"Easier upgrades for existing applications"}),"\n",(0,s.jsx)(n.li,{children:"More consistent behavior across projects"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Settings that now have defaults:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"HTTP Agent"}),": timeout, retries, cache, CORS, headers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cache"}),": TTL, enabled state"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Router"}),": middleware timeout"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Server"}),": port, concurrency, static path, logger, cache settings"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"updated-dependencies",children:"updated dependencies"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Updated all project dependencies"}),"\n",(0,s.jsxs)(n.li,{children:["Updated to ",(0,s.jsx)(n.strong,{children:"chokidar v4"})," for better file watching"]}),"\n",(0,s.jsx)(n.li,{children:"Improved source map support"}),"\n",(0,s.jsx)(n.li,{children:"Better TypeScript support throughout"}),"\n",(0,s.jsxs)(n.li,{children:["Module resolution updates (",(0,s.jsx)(n.code,{children:"Node16"})," \u2192 ",(0,s.jsx)(n.code,{children:"nodenext"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,s.jsx)(n.h3,{id:"1-update-dependencies",children:"1. Update Dependencies"}),"\n",(0,s.jsx)(n.p,{children:"Update all IMA.js packages to version 20.x.x:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install @ima/core@20 @ima/server@20 @ima/cli@20 @ima/react-page-renderer@20 @ima/testing-library@20 @ima/helpers@20\n"})}),"\n",(0,s.jsx)(n.p,{children:"If using additional packages:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install @ima/plugin-cli@20\n\nnpm install @ima/storybook-integration@20\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-update-nodejs--build-tools",children:"2. Update Node.js & Build Tools"}),"\n",(0,s.jsx)(n.p,{children:"Ensure you're using compatible versions:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Node.js"}),": 22.x or higher"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"npm"}),": 9.x or higher"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-update-target-environment-es2024",children:"3. Update Target Environment (ES2024)"}),"\n",(0,s.jsxs)(n.h4,{id:"update-tsconfigjson",children:["Update ",(0,s.jsx)(n.code,{children:"tsconfig.json"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    "target": "ES2024",\n    "lib": ["ES2024", "DOM", "DOM.Iterable"],\n    "module": "Node16",\n    "moduleResolution": "nodenext"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.h4,{id:"update-eslintrcjs",children:["Update ",(0,s.jsx)(n.code,{children:".eslintrc.js"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  env: {\n    browser: true,\n    node: true,\n    es2024: true, // Changed from es2022\n  },\n  // ... rest of config\n};\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"update-jestconfigjs-if-using-swc",children:["Update ",(0,s.jsx)(n.code,{children:"jest.config.js"})," (if using SWC):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  transform: {\n    '^.+\\\\.(t|j)sx?$': [\n      '@swc/jest',\n      {\n        jsc: {\n          target: 'es2024', // Changed from es2022\n          // ... rest of config\n        },\n      },\n    ],\n  },\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-async-bootstrap-changes-\ufe0f-breaking",children:"4. Async Bootstrap Changes \u26a0\ufe0f BREAKING"}),"\n",(0,s.jsx)(n.p,{children:"The application bootstrap is now fully asynchronous."}),"\n",(0,s.jsx)(n.h4,{id:"update-client-entry-points",children:"Update client entry points"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Before\nreviveClientApp();\n\n// After\nawait reviveClientApp();\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Update your onLoad handler to await the reviveClientApp function in ",(0,s.jsx)(n.code,{children:"main.js"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"ima.onLoad().then(async () => {\n  await ima.reviveClientApp(getInitialAppConfigFunctions());\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-add-required-server-template-overloadedejs-\ufe0f-breaking",children:"5. Add Required Server Template: overloaded.ejs \u26a0\ufe0f BREAKING"}),"\n",(0,s.jsx)(n.p,{children:"IMA.js 20 introduces a new server degradation system that requires an additional server template file for handling overload scenarios."}),"\n",(0,s.jsx)(n.h4,{id:"create-the-overloadedejs-template",children:"Create the overloaded.ejs template"}),"\n",(0,s.jsxs)(n.p,{children:["Create a new file at ",(0,s.jsx)(n.code,{children:"server/template/overloaded.ejs"})," in your application root:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ejs",children:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <meta name="robots" content="noindex, nofollow">\n    <title>Service Temporarily Unavailable</title>\n  </head>\n  <body>\n    <h1>Service Temporarily Unavailable</h1>\n  </body>\n</html>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["This template is automatically used when the server degradation system detects an overload condition based on your ",(0,s.jsx)(n.code,{children:"isOverloaded"})," degradation function."]}),"\n",(0,s.jsx)(n.h4,{id:"custom-template-path-optional",children:"Custom template path (optional)"}),"\n",(0,s.jsx)(n.p,{children:"If you want to use a custom path for your overloaded template, configure it in your environment settings:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// server/config/environment.js\nmodule.exports = {\n  prod: {\n    $Server: {\n      template: {\n        overloaded: './custom/path/to/overloaded.ejs',\n        // You can also customize other templates\n        spa: './custom/path/to/spa.ejs',\n        '500': './custom/path/to/500.ejs',\n        '400': './custom/path/to/400.ejs',\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"understanding-the-degradation-flow",children:"Understanding the degradation flow"}),"\n",(0,s.jsx)(n.p,{children:"The degradation system works in the following order (from most to least severe):"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Overloaded (503)"}),": Returns the ",(0,s.jsx)(n.code,{children:"overloaded.ejs"})," template immediately"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Static Error Pages"}),": Serves pre-rendered static HTML for error routes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SPA Mode"}),": Sends minimal HTML shell, client renders everything"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SPA Prefetch"}),": Server-side renders but optimized for client hydration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Full SSR"}),": Normal server-side rendering (default)"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"required-template-files-summary",children:"Required template files summary"}),"\n",(0,s.jsxs)(n.p,{children:["Ensure your ",(0,s.jsx)(n.code,{children:"server/template/"})," directory contains all required template files:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"your-app/\n\u251c\u2500\u2500 server/\n\u2502   \u2514\u2500\u2500 template/\n\u2502       \u251c\u2500\u2500 spa.ejs          \u2190 SPA shell template\n\u2502       \u251c\u2500\u2500 500.ejs          \u2190 Server error template\n\u2502       \u251c\u2500\u2500 400.ejs          \u2190 Client error template\n\u2502       \u2514\u2500\u2500 overloaded.ejs   \u2190 Overloaded template (NEW in v20!)\n\u2514\u2500\u2500 app/\n    \u2514\u2500\u2500 config/\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"/server/performance",children:"Learn more about Performance & Degradation \u2192"})}),"\n",(0,s.jsxs)(n.h3,{id:"6-remove-imapath-\ufe0f-breaking",children:["6. Remove ",(0,s.jsx)(n.code,{children:"$IMA.$Path"})," \u26a0\ufe0f BREAKING"]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"$IMA.$Path"})," global has been ",(0,s.jsx)(n.strong,{children:"removed without replacement"})," due to security concerns (exposed application file paths to the client)."]}),"\n",(0,s.jsx)(n.h4,{id:"remove-from-settings-files",children:"Remove from settings files:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// app/config/settings.js\nexport default {\n  prod: {\n    // Remove this line\n    // $Path: '/path/to/app',\n  },\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"remove-from-documentviewspaejs",children:"Remove from DocumentView/spa.ejs:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'// Remove any references like:\n$IMA.$Path = "...";\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["If your application relied on ",(0,s.jsx)(n.code,{children:"$IMA.$Path"}),", you'll need to find alternative approaches. In most cases, this value wasn't actually needed in client code."]})}),"\n",(0,s.jsx)(n.h3,{id:"7-update-environment-configuration-\ufe0f-breaking",children:"7. Update Environment Configuration \u26a0\ufe0f BREAKING"}),"\n",(0,s.jsxs)(n.p,{children:["IMA.js 20 includes significant changes to default configuration. ",(0,s.jsx)(n.strong,{children:"Many settings that were in your template are now in core with sensible defaults."})]}),"\n",(0,s.jsxs)(n.h4,{id:"review-and-simplify-serverconfigenvironmentjs",children:["Review and simplify ",(0,s.jsx)(n.code,{children:"server/config/environment.js"}),":"]}),"\n",(0,s.jsxs)(n.p,{children:["The following settings now have defaults in core and ",(0,s.jsx)(n.strong,{children:"can be removed"})," from your environment.js file:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Environment defaults (you can remove these):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  prod: {\n    // \u2702\ufe0f These can be removed - now have defaults in core:\n    $Debug: false,                    // Default: false (prod), true (dev)\n    $Language: { '//*:*': 'en' },     // Default: { '//*:*': 'en' }\n    $Server: {\n      port: 3001,                     // Default: 3001\n      staticPath: '/static',          // Default: '/static'\n      concurrency: 5,               // Default: 5 (prod), 1 (dev)\n      clusters: null,                 // Default: null\n      cache: {\n        enabled: false,               // Default: false\n        cacheKeyGenerator: null,      // Default: null\n        entryTtl: 3600000,           // Default: 3600000 (1 hour)\n        unusedEntryTtl: 900000,      // Default: 900000 (15 minutes)\n        maxEntries: 500,             // Default: 500\n      },\n      logger: {\n        formatting: 'simple',         // Default: 'simple' (prod), 'dev' (dev)\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"After cleanup - minimal configuration:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const pkgJson = require('../../package.json');\n\nmodule.exports = {\n  prod: {\n    $Version: pkgJson.version,\n    // Only include settings specific to your application\n    // All the defaults above are now provided by core\n  },\n};\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Only keep settings in environment.js that you need to ",(0,s.jsx)(n.strong,{children:"override"})," from the defaults or that are ",(0,s.jsx)(n.strong,{children:"specific to your application"})," (like ",(0,s.jsx)(n.code,{children:"$Proxy"})," configuration)."]})}),"\n",(0,s.jsxs)(n.h4,{id:"review-and-simplify-appconfigsettingsjs",children:["Review and simplify ",(0,s.jsx)(n.code,{children:"app/config/settings.js"}),":"]}),"\n",(0,s.jsx)(n.p,{children:"Similarly, many settings defaults were moved to core:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Settings defaults (you can remove these):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"export const initSettings = (ns, oc, config) => {\n  return {\n    prod: {\n      // \u2702\ufe0f These can be removed - now have defaults in core:\n      $Http: {\n        defaultRequestOptions: {\n          timeout: 15000,                 // Default: 15000 ms\n          repeatRequest: 1,               // Default: 1\n          ttl: 60000,                     // Default: 60000 ms\n          fetchOptions: {\n            mode: 'cors',                 // Default: 'cors'\n            headers: {\n              Accept: 'application/json', // Default: 'application/json'\n            },\n          },\n          validateCookies: false,         // Default: false\n          cache: true,                    // Default: true\n        },\n        cacheOptions: {\n          prefix: 'http.',                // Default: 'http.'\n        },\n      },\n      $Router: {\n        middlewareTimeout: 30000,         // Default: 30000 ms (30 seconds)\n      },\n      $Cache: {\n        enabled: true,                    // Default: true\n        ttl: 60000,                       // Default: 60000 ms (60 seconds)\n      },\n    },\n  };\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"After cleanup - minimal configuration:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"import { DocumentView } from 'app/document/DocumentView';\n\nexport const initSettings = (ns, oc, config) => {\n  return {\n    prod: {\n      $Version: config.$Version,\n      $Page: {\n        $Render: {\n          documentView: DocumentView,  // Required: your DocumentView component\n          masterElementId: 'page',     // Required: root element ID\n        },\n      },\n      // Only override defaults when needed, e.g.:\n      // $Http: {\n      //   defaultRequestOptions: {\n      //     timeout: 30000,  // Custom timeout\n      //   },\n      // },\n    },\n\n    dev: {\n      // Development-specific overrides only\n    },\n  };\n};\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"$Page.$Render"})," settings are still ",(0,s.jsx)(n.strong,{children:"required"})," as they're specific to your application (your DocumentView and root element)."]})}),"\n",(0,s.jsx)(n.h3,{id:"8-update-degradation-configuration-\ufe0f-breaking",children:"8. Update Degradation Configuration \u26a0\ufe0f BREAKING"}),"\n",(0,s.jsx)(n.p,{children:"The server degradation system has been completely refactored with more flexible function-based approach."}),"\n",(0,s.jsx)(n.h4,{id:"old-configuration-removed",children:"Old configuration (removed):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u274c These no longer work\nmodule.exports = {\n  prod: {\n    $Server: {\n      staticConcurrency: 100,\n      overloadConcurrency: 100,\n      serveSPA: {\n        allow: true,\n        blackList: userAgent => /Googlebot|SeznamBot/.test(userAgent),\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"new-configuration",children:"New configuration:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const { createUserAgentDegradation, invert } = require('@ima/server/degradation');\n\nmodule.exports = {\n  prod: {\n    $Server: {\n      degradation: {\n        // Replace serveSPA with isSPA function\n        isSPA: invert(\n          createUserAgentDegradation(/Googlebot|SeznamBot/i)\n        ),\n\n        // Custom static page logic\n        isStatic: (event) => {\n          // Return true to serve static HTML\n          return false;\n        },\n\n        // Custom overload logic\n        isOverloaded: (event) => {\n          // Return true to show overload page\n          return false;\n        },\n\n        // NEW: SPA Prefetch mode\n        isSPAPrefetch: (event) => {\n          // Return true to use SPA prefetch mode\n          return false;\n        },\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Migration examples:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Old: Allow SPA for all except bots\nserveSPA: {\n  allow: true,\n  blackList: userAgent => /Googlebot/.test(userAgent),\n}\n\n// New: Same behavior\ndegradation: {\n  isSPA: invert(createUserAgentDegradation(/Googlebot/i)),\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Old: Serve static pages at high concurrency\nstaticConcurrency: 100,\n\n// New: Custom function with access to full context\ndegradation: {\n  isStatic: (event) => {\n    const concurrent = event.context.server.instanceRecycler.getConcurrentRequests();\n    return concurrent > 100;\n  },\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"/server/performance",children:"Learn more about Performance & Degradation \u2192"})}),"\n",(0,s.jsxs)(n.h3,{id:"9-update-imaplugin-cli-watch-paths-\ufe0f-breaking",children:["9. Update ",(0,s.jsx)(n.code,{children:"@ima/plugin-cli"})," Watch Paths \u26a0\ufe0f BREAKING"]}),"\n",(0,s.jsx)(n.p,{children:"Chokidar v4 no longer supports globs in watch paths."}),"\n",(0,s.jsxs)(n.h4,{id:"update-ima-pluginconfigjs",children:["Update ",(0,s.jsx)(n.code,{children:"ima-plugin.config.js"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Before - using globs\nmodule.exports = {\n  additionalWatchPaths: [\n    './transform/**/*',\n    './polyfill/**/*',\n    './setupJest.js',\n  ],\n};\n\n// After - directories and files only\nmodule.exports = {\n  additionalWatchPaths: [\n    './transform',      // Directory - all contents watched automatically\n    './polyfill',       // Directory - all contents watched automatically\n    './setupJest.js',   // File - direct path\n  ],\n};\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["When you specify a directory, ",(0,s.jsx)(n.strong,{children:"all its contents are watched recursively"}),". You don't need glob patterns anymore."]})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"optional-new-features-to-adopt",children:"Optional: New Features to Adopt"}),"\n",(0,s.jsx)(n.h3,{id:"json-controllers-with-use-server",children:"JSON Controllers with 'use server'"}),"\n",(0,s.jsx)(n.p,{children:"Create API endpoints within your IMA application:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Create a JSON controller:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// app/page/api/articles/ArticlesApiController.js\n'use server';\n\nimport { AbstractController } from '@ima/core';\n\nexport default class ArticlesApiController extends AbstractController {\n  static $responseType = 'json';\n\n  async load() {\n    const articles = await this.#articlesService.fetchAll();\n\n    return {\n      data: articles,\n      timestamp: Date.now(),\n    };\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Add route:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// app/config/routes.js\nrouter.add('api.articles', '/api/articles', ArticlesApiController, () => null);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"3. Access the endpoint:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'GET /api/articles\n\u2192 Returns: { "data": [...], "timestamp": 1234567890 }\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"/basic-features/json-controllers",children:"Learn more \u2192"})}),"\n",(0,s.jsx)(n.h3,{id:"performance-timing-tracking",children:"Performance Timing Tracking"}),"\n",(0,s.jsx)(n.p,{children:"Add performance monitoring to your server:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// server/app.js\nimport { instrumentEmitterWithTimings, createIMAServer } from '@ima/server';\n\nconst imaServer = createIMAServer();\nconst { emitter } = imaServer;\n\ninstrumentEmitterWithTimings(emitter, {\n  enabled: true,\n  logToConsole: process.env.NODE_ENV !== 'production',\n  slowThreshold: 50,\n  samplingRate: process.env.NODE_ENV === 'production' ? 0.1 : 1.0,\n  onComplete: (report) => {\n    // Send to your APM service\n    apm.recordTiming('request.duration', report.totalDuration);\n  },\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Then track custom operations:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"emitter.on(Event.Request, async (event) => {\n  const { timing } = event.context;\n\n  timing.start('database.query', { table: 'articles' });\n  const articles = await db.query('SELECT * FROM articles');\n  timing.end('database.query', { rows: articles.length });\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"/server/timing-tracking",children:"Learn more \u2192"})}),"\n",(0,s.jsx)(n.h3,{id:"spa-prefetch-mode-1",children:"SPA Prefetch Mode"}),"\n",(0,s.jsx)(n.p,{children:"Hybrid between SSR and SPA:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// server/config/environment.js\nconst { createUserAgentDegradation, invert } = require('@ima/server/degradation');\n\nmodule.exports = {\n  prod: {\n    $Server: {\n      degradation: {\n        // Enable SPA prefetch for non-bot traffic\n        isSPAPrefetch: invert(\n          createUserAgentDegradation(/bot|crawler|spider/i)\n        ),\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"full-list-of-breaking-changes",children:"Full List of Breaking Changes"}),"\n",(0,s.jsx)(n.h3,{id:"global",children:"Global"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Updated dependencies"}),": Updated all project dependencies to the latest versions. This shouldn't affect most applications."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"imacore",children:"@ima/core"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Async Bootstrap"}),": ",(0,s.jsx)(n.code,{children:"bootstrap.run()"})," now returns a ",(0,s.jsx)(n.code,{children:"Promise"}),". Client functions ",(0,s.jsx)(n.code,{children:"bootClientApp()"})," and ",(0,s.jsx)(n.code,{children:"reviveClientApp()"})," are now ",(0,s.jsx)(n.code,{children:"async"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Removed ",(0,s.jsx)(n.code,{children:"$IMA.$Path"})]}),": Security risk - no replacement provided."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ES2024 Target"}),": Build now targets ES2024 instead of ES2022."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Environment Types"}),": ",(0,s.jsx)(n.code,{children:"Environment"})," type updated, use ",(0,s.jsx)(n.code,{children:"ParsedEnvironment"})," for parsed config."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Default Settings"}),": Many settings (like ",(0,s.jsx)(n.code,{children:"$Http"}),", ",(0,s.jsx)(n.code,{children:"$Cache"}),", ",(0,s.jsx)(n.code,{children:"$Router"})," timeouts, defaults, etc.) now have core defaults. While technically breaking if you relied on having NO defaults, most apps will benefit from this change. See ",(0,s.jsx)(n.a,{href:"#6-update-environment-configuration--breaking",children:"Update Environment Configuration"})," for details."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"imaserver",children:"@ima/server"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Required Template File"}),": New ",(0,s.jsx)(n.code,{children:"overloaded.ejs"})," template file is required in ",(0,s.jsx)(n.code,{children:"server/template/"})," directory for handling server overload scenarios (503 errors)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SPA Config"}),": SPA configuration was completely removed and replaced with degradation functions (see ",(0,s.jsx)(n.a,{href:"#7-update-degradation-configuration--breaking",children:"Update Degradation Configuration"})," for more information)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Degradation Config"}),": Complete rewrite - see ",(0,s.jsx)(n.a,{href:"#7-update-degradation-configuration--breaking",children:"Update Degradation Configuration"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"imareact-page-renderer",children:"@ima/react-page-renderer"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Removed ",(0,s.jsx)(n.code,{children:"$IMA.$Path"})]}),": Update any DocumentView code that referenced this."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"imacli",children:"@ima/cli"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ES2024 Target"}),": All builds now target ES2024."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"imaplugin-cli",children:"@ima/plugin-cli"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Chokidar v4"}),": Globs no longer supported in ",(0,s.jsx)(n.code,{children:"additionalWatchPaths"})," - see ",(0,s.jsx)(n.a,{href:"#8-update-imaplugin-cli-watch-paths--breaking",children:"Update Watch Paths"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ES2024 Target"}),": Plugin builds now target ES2024."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Updated to chokidar v4.0"}),": Breaking change in watch paths."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"create-ima-app",children:"create-ima-app"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ES2024 Target"}),": New projects use ES2024."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Simplified Config"}),": Most defaults moved to core. New projects have much cleaner ",(0,s.jsx)(n.code,{children:"environment.js"})," and ",(0,s.jsx)(n.code,{children:"settings.js"})," files. Existing projects can safely remove default configuration values - see ",(0,s.jsx)(n.a,{href:"#6-update-environment-configuration--breaking",children:"Update Environment Configuration"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"full-list-of-new-features--improvements",children:"Full List of New Features & Improvements"}),"\n",(0,s.jsx)(n.h3,{id:"imacore-1",children:"@ima/core"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"JSON Controllers"}),": New ",(0,s.jsx)(n.code,{children:"$responseType = 'json'"})," for controllers."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Async Bootstrap"}),": For better performance metrics."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ControllerResponseType"}),": New TypeScript type export."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cache Performance"}),": Minor serialization/deserialization improvements."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ParsedEnvironment"}),": New type for environment configuration."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"imaserver-1",children:"@ima/server"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"TimingTracker"}),": Advanced performance monitoring system."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"instrumentEmitterWithTimings"}),": Automatic performance tracking integration."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SPA Prefetch Mode"}),": New rendering mode (hybrid between SSR and SPA) for optimal performance."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Degradation Functions"}),": Flexible, function-based degradation system."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Degradation Helpers"}),": ",(0,s.jsx)(n.code,{children:"createUserAgentDegradation()"}),", ",(0,s.jsx)(n.code,{children:"invert()"})," utilities."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Performance Metrics"}),": Detailed timing data in console and APM integration."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"imacli-1",children:"@ima/cli"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"'use server' Directive"}),": Strips server-only code from client bundles."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"UseServerProcessor"}),": Babel transformer for server-only code."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ES2024 Support"}),": Latest JavaScript features in build output."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"--forceSPAPrefetch"}),": CLI flag for testing SPA prefetch mode."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"imareact-page-renderer-1",children:"@ima/react-page-renderer"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SPA Prefetch Support"}),": Renderer skips HTML generation in prefetch mode."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"imatesting-library",children:"@ima/testing-library"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Updated for v20"}),": Full support for async bootstrap and new features."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"create-ima-app-1",children:"create-ima-app"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Simplified Templates"}),": ~100 lines of boilerplate configuration removed from templates thanks to core defaults (",(0,s.jsx)(n.a,{href:"https://github.com/seznam/ima/pull/621",children:"PR #621"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cleaner Config Files"}),": ",(0,s.jsx)(n.code,{children:"environment.js"})," and ",(0,s.jsx)(n.code,{children:"settings.js"})," are now minimal and focused on app-specific configuration."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ES2024 Templates"}),": New projects use latest JavaScript."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Updated Dependencies"}),": Latest versions of all peer dependencies."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},3023:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var i=r(3696);const s={},t=i.createContext(s);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:n},e.children)}},9035:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/performance-timeline-5ffdcbab80907b609a67d09e3d748d49.jpg"}}]);