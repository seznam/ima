"use strict";(self.webpackChunk_ima_docs=self.webpackChunk_ima_docs||[]).push([[1238],{3505:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"migration/migration-0.16.0","title":"Migration 0.16.0","description":"Migration > Migration to version 0.16.0","source":"@site/../docs/migration/migration-0.16.0.md","sourceDirName":"migration","slug":"/migration/migration-0.16.0","permalink":"/migration/migration-0.16.0","draft":false,"unlisted":false,"editUrl":"https://github.com/seznam/ima/tree/master/docs/../docs/migration/migration-0.16.0.md","tags":[],"version":"current","lastUpdatedBy":"Ji\u0159\xed Fencl","lastUpdatedAt":1743072967000,"frontMatter":{"title":"Migration 0.16.0","description":"Migration > Migration to version 0.16.0"},"sidebar":"docs","previous":{"title":"Migration 0.15.0","permalink":"/migration/migration-0.15.0"},"next":{"title":"Migration 17.0.0","permalink":"/migration/migration-17.0.0"}}');var r=i(2540),t=i(3023);const o={title:"Migration 0.16.0",description:"Migration > Migration to version 0.16.0"},d=void 0,c={},l=[{value:"Changes in dependencies",id:"changes-in-dependencies",level:2},{value:"Migration guide",id:"migration-guide",level:2},{value:"Other changes",id:"other-changes",level:2},{value:"New Features",id:"new-features",level:2}];function a(e){const n={a:"a",code:"code",del:"del",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Upgrading from version 15 should be pretty straightforward and your application should work with no to minimal changes required."}),"\n",(0,r.jsx)(n.h2,{id:"changes-in-dependencies",children:"Changes in dependencies"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"babel-eslint"}),": ",(0,r.jsx)(n.code,{children:"8.2.2"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"10.0.1"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"enzyme"}),": ",(0,r.jsx)(n.code,{children:"3.7.0"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"3.8.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"enzyme-adapter-react-16"}),": ",(0,r.jsx)(n.code,{children:"1.1.1"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"1.7.1"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"eslint"}),": ",(0,r.jsx)(n.code,{children:"4.19.1"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"5.11.1"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"eslint-config-prettier"}),": ",(0,r.jsx)(n.code,{children:"2.9.0"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"3.3.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"eslint-plugin-jasmine"}),": ",(0,r.jsx)(n.code,{children:"2.9.3"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"2.10.1"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"eslint-plugin-jest"}),": ",(0,r.jsx)(n.code,{children:"21.15.0"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"22.1.2"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"eslint-plugin-prettier"}),": ",(0,r.jsx)(n.code,{children:"2.6.0"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"3.0.1"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"eslint-plugin-react"}),": ",(0,r.jsx)(n.code,{children:"7.7.0"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"7.12.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ima-gulp-tasks"}),": ",(0,r.jsx)(n.code,{children:"0.15.0"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"^0.16.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"jest"}),": ",(0,r.jsx)(n.code,{children:"22.4.3"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"23.6.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"express-http-proxy"}),": ",(0,r.jsx)(n.code,{children:"1.1.0"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"1.5.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"helmet"}),": ",(0,r.jsx)(n.code,{children:"3.12.0"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"3.15.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ima"}),": ",(0,r.jsx)(n.code,{children:"0.15.1"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"0.16.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ima-server"}),": ",(0,r.jsx)(n.code,{children:"0.15.0"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"0.16.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"method-override"}),": ",(0,r.jsx)(n.code,{children:"2.3.10"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"3.0.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"multer"}),": ",(0,r.jsx)(n.code,{children:"1.3.0"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"1.4.1"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"react"}),": ",(0,r.jsx)(n.code,{children:"16.2.0"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"16.7.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"react-dom"}),": ",(0,r.jsx)(n.code,{children:"16.2.0"}),"\xa0\xa0\u2192\xa0\xa0",(0,r.jsx)(n.code,{children:"16.7.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"enzyme-to-json"}),": ",(0,r.jsx)(n.code,{children:"^3.3.5"})," ",(0,r.jsx)(n.em,{children:"(new)"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.del,{children:(0,r.jsx)(n.strong,{children:"jest-serializer-enzyme"})})," ",(0,r.jsx)(n.em,{children:"(removed)"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.del,{children:(0,r.jsx)(n.strong,{children:"react-test-renderer"})})," ",(0,r.jsx)(n.em,{children:"(removed)"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"migration-guide",children:"Migration guide"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use of ",(0,r.jsx)(n.strong,{children:"regular expressions"})," in ",(0,r.jsx)(n.code,{children:"serveSPA.blacklist"}),". If you've been using array of strings, you need to change the syntax to use regular expressions instead:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",children:"/* app/environment.js */\n{\n  ...\n- blackList: ['Googlebot', 'SeznamBot'],\n+ blackList: userAgent => (new RegExp('Googlebot|SeznamBot', 'g')).test(userAgent),\n  ...\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Added new mandatory parameter ",(0,r.jsx)(n.code,{children:"action"})," to ",(0,r.jsx)(n.code,{children:"route()"})," method in ",(0,r.jsx)(n.strong,{children:"Router"})," of a type ",(0,r.jsx)(n.code,{children:"{ type: string, event: Event|null, url: string|null }"}),", where ",(0,r.jsx)(n.code,{children:"type"})," attribute can take one of these values: ",(0,r.jsx)(n.code,{children:"const { REDIRECT, CLICK, POP_STATE, ERROR } = ActionTypes"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"/* ima/Router/ClientRouter.js */\nroute(\n  path,\n  options = {},\n  { event = null, type = ActionTypes.REDIRECT, url = null } = {}\n)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Http options withCredentials is set to false by default. You must check your HTTP CORS requests and you must set withCredentials to true for sending Cookie header."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"New serializer settings in Jest"}),", to configure it first add path to a newly created file ",(0,r.jsx)(n.code,{children:"jest.setup.js"})," (located in the root directory) into ",(0,r.jsx)(n.code,{children:"setupFiles"})," array in ",(0,r.jsx)(n.code,{children:"jest.config.json"}),". After that add new ",(0,r.jsx)(n.code,{children:"snapshotSerializers"})," field with ",(0,r.jsx)(n.code,{children:'["enzyme-to-json/serializer"]'})," value, that handles module loading, which converts Enzyme wrappers into format compatible with Jest snapshots."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",children:'/* jest.config.json */\n"setupFiles": [\n  "ima/test.js",\n  "ima/polyfill/imaLoader.js",\n  "ima/polyfill/imaRunner.js",\n+ "<rootDir>/jest.setup.js"\n],\n+ snapshotSerializers": ["enzyme-to-json/serializer"]\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"/* jest.setup.js */\nconst enzyme = require('enzyme');\nconst Adapter = require('enzyme-adapter-react-16');\n\nenzyme.configure({ adapter: new Adapter() });\n"})}),"\n",(0,r.jsx)(n.h2,{id:"other-changes",children:"Other changes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"IMA.js-helpers"})," - removed ",(0,r.jsx)(n.code,{children:"throttle"})," and ",(0,r.jsx)(n.code,{children:"debounce"})," functions. You can replace ",(0,r.jsx)(n.code,{children:"throttle"})," with ",(0,r.jsx)(n.code,{children:"throttle"})," method available in ",(0,r.jsx)(n.strong,{children:"UIComponentHelper"})," in ",(0,r.jsx)(n.a,{href:"https://github.com/seznam/IMA.js-ui-atoms/blob/master/src/Visibility.js#L91",children:"IMA.js-ui-atoms"})," package. ",(0,r.jsx)(n.a,{href:"https://github.com/seznam/IMA.js-helpers/commit/73843d03cd46e79b6d3bd2f03df71d74fe89466c",children:"73843d0"})]}),"\n",(0,r.jsxs)(n.li,{children:["Updated to ",(0,r.jsx)(n.strong,{children:"React 16.7"}),", which along with new context API and other features introduced deprecation of ",(0,r.jsx)(n.code,{children:"componentWillMount"}),", ",(0,r.jsx)(n.code,{children:"componentWillReceiveProps"})," and ",(0,r.jsx)(n.code,{children:"componentWillUpdate"})," lifecycle methods."]}),"\n",(0,r.jsxs)(n.li,{children:["Upgraded to ",(0,r.jsx)(n.strong,{children:"Babel 7"})," and latest ",(0,r.jsx)(n.strong,{children:"ESLint 5"}),", which may result on some changes specific to your application."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"new-features",children:"New Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Most notable new feature is the introduction of ",(0,r.jsx)(n.strong,{children:"PageManagerHandlers"})," which adds the possibility to customize actions like saving and restoring scroll positions, setting browser's address bar URL etc. For more information visit the ",(0,r.jsx)(n.a,{href:"/basic-features/page-manager#intervene-into-the-process",children:"documentation"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},3023:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>d});var s=i(3696);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);