"use strict";(self.webpackChunk_ima_docs=self.webpackChunk_ima_docs||[]).push([[3007],{8793:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"basic-features/dictionary","title":"Dictionary","description":"Basic features > Dictionary and language features","source":"@site/../docs/basic-features/dictionary.md","sourceDirName":"basic-features","slug":"/basic-features/dictionary","permalink":"/basic-features/dictionary","draft":false,"unlisted":false,"editUrl":"https://github.com/seznam/ima/tree/master/docs/../docs/basic-features/dictionary.md","tags":[],"version":"current","lastUpdatedBy":"Ji\u0159\xed Fencl","lastUpdatedAt":1743072967000,"frontMatter":{"title":"Dictionary","description":"Basic features > Dictionary and language features"},"sidebar":"docs","previous":{"title":"SEO & Meta Manager","permalink":"/basic-features/seo-and-meta-manager"},"next":{"title":"Error Handling","permalink":"/basic-features/error-handling"}}');var a=s(2540),i=s(3023);const o={title:"Dictionary",description:"Basic features > Dictionary and language features"},r=void 0,l={},c=[{value:"Configuration",id:"configuration",level:2},{value:"URL parser configuration",id:"url-parser-configuration",level:3},{value:"<code>:language</code> placeholder",id:"language-placeholder",level:4},{value:"Language files",id:"language-files",level:3},{value:"Usage",id:"usage",level:2},{value:"Messageformat library",id:"messageformat-library",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"Dictionary in IMA.js app serves many purposes. Simplest of them is keeping text strings out of component markup. More advanced one would be internationalization and in-text replacements."}),"\n",(0,a.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsxs)(n.p,{children:["First we need to tell IMA.js where to look for dictionary files. Naming convention of the files is up to you, but it should be clear what language are the files meant for and ",(0,a.jsx)(n.strong,{children:"glob\xa0pattern"})," has to be able to match path to the files. IMA.js ",(0,a.jsx)(n.strong,{children:"defaults to the following configuration:"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"languages: {\n  cs: ['./app/**/*CS.json'],\n  en: ['./app/**/*EN.json']\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:["However you can easily override this settings in ",(0,a.jsx)(n.a,{href:"/cli/ima-config-js#languages",children:"ima.config.js"})," (an example):"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",metastring:'title="./ima.config.js"',children:"module.exports = {\n  languages: {\n    cs: [\n      './app/component/**/*CS.json',\n      './app/page/**/*CS.json'\n    ],\n    en: [\n      './app/component/**/*EN.json',\n      './app/page/**/*EN.json'\n    ],\n    de: [\n      './app/component/**/*DE.json',\n      './app/page/**/*DE.json'\n    ]\n  }\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"url-parser-configuration",children:"URL parser configuration"}),"\n",(0,a.jsxs)(n.p,{children:["We also need to specify what language should be loaded. This is ",(0,a.jsx)(n.strong,{children:"done dynamically depending on current URL"}),". You can customize the URL patterns to language mapping in ",(0,a.jsx)(n.strong,{children:"environment settings"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"The configuration consists of simple key-value pairs, that are used for configuring the languages used with specific hosts or starting paths:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"key"})})," - has to start with '//' instead of a protocol, and you can define the root path."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"value"})})," - is a language to use when the key is matched by the current URL."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",metastring:'title="./server/config/environment.js"',children:"module.exports = (() => ({\n  prod: {\n    $Language: {\n      '//*:*/cs': 'cs', // https://ima-app.com/cs/custom-route\n      '//*:*/en': 'en', // https://ima-app.com/en/custom-route\n      '//*:*': 'cs', // https://ima-app.com/custom-route\n    },\n  }\n}))();\n"})}),"\n",(0,a.jsxs)(n.h4,{id:"language-placeholder",children:[(0,a.jsx)(n.code,{children:":language"})," placeholder"]}),"\n",(0,a.jsxs)(n.p,{children:["To make the language definition a bit easier for multilingua applications, you can use ",(0,a.jsx)(n.code,{children:":language"})," placeholder in following way:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",metastring:'title="./server/config/environment.js"',children:"module.exports = (() => ({\n  prod: {\n    $Language: {\n      '//*:*/:language': ':language', // https://ima-app.com/[en|cs]/custom-route\n      '//*:*': 'cs', // https://ima-app.com/custom-route\n    },\n  }\n}))();\n"})}),"\n",(0,a.jsx)(n.h3,{id:"language-files",children:"Language files"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.a,{href:"http://messageformat.github.io/messageformat/",children:"messageformat"})," compiler, which processes our language files, expects .JSON files on the input. Contents of these files are objects, which can be nested into multiple levels. These levels are then represtend as a namespace ",(0,a.jsx)(n.code,{children:"key"})," to the value in the dictionary."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",metastring:"title=./pollVoteEN.json",children:'{\n  "resultTitle": "Result of {name}:",\n  "result": {\n    "voted": "{count, plural, =0{Found no results} one{Found one result} other{Found # results} }",\n    "reader": "{gender, select, male{He said} female{She said} other{They said} }",\n  }\n}\n'})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:["File name is used as a namespace for strings it defines. String defined under key ",(0,a.jsx)(n.code,{children:"submit"})," in file ",(0,a.jsx)(n.code,{children:"uploadFormCS.json"})," will be accessible under ",(0,a.jsx)(n.code,{children:"uploadForm.submit"}),"."]})}),"\n",(0,a.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsxs)(n.p,{children:["Every component and view extending ",(0,a.jsx)(n.code,{children:"AbstractComponent"})," or ",(0,a.jsx)(n.code,{children:"AbstractPureComponent"})," has access to ",(0,a.jsx)(n.code,{children:"localize"})," method from within its instance. This method is alias to a ",(0,a.jsx)(n.code,{children:"get"})," method from the Dictionary instance and takes 2 arguments:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"key"})," - namespace and name of the localization string -> if you have ",(0,a.jsx)(n.code,{children:"resultTitle"})," string in file ",(0,a.jsx)(n.code,{children:"pollVoteEN.json"})," the key to this string would be ",(0,a.jsx)(n.code,{children:"pollVote.resultTitle"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"parameters"})," - Optional object with replacements and parameters for ",(0,a.jsx)(n.a,{href:"http://messageformat.github.io/messageformat/",children:"messageformat"})," syntax. For more info about the syntax check out ",(0,a.jsx)(n.a,{href:"http://userguide.icu-project.org/formatparse/messages",children:"ICU guide"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"import { AbstractPureComponent } from '@ima/react-page-renderer';\n\nclass PollVote extends AbstractPureComponent {\n  render() {\n    return (\n      <div>\n        {this.localize('pollVote.resultTitle')}\n        {this.localize('pollVote.result.voted', {count: 3})}\n      </div>\n    );\n  }\n}\n"})}),"\n",(0,a.jsxs)(n.admonition,{type:"tip",children:[(0,a.jsxs)(n.p,{children:["Use ",(0,a.jsx)(n.code,{children:"useComponent().localize"})," or ",(0,a.jsx)(n.code,{children:"useLocalize()"})," hooks in functional components."]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"import { useComponent, useLocalize } from '@ima/react-page-renderer';\n\nfunction PollVote() {\n  // const { localize } = useComponent();\n  const localize = useLocalize();\n\n  return (\n    <div>\n      {localize('pollVote.resultTitle')}\n      {localize('pollVote.result.voted', {count: 3})}\n    </div>\n  );\n}\n"})})]}),"\n",(0,a.jsx)(n.h2,{id:"messageformat-library",children:"Messageformat library"}),"\n",(0,a.jsxs)(n.p,{children:["For more information on the available selectors, formatters, and other details, please see ",(0,a.jsx)(n.a,{href:"http://messageformat.github.io/messageformat/guide/",children:"Format guide"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["Dictionary is also registered in ",(0,a.jsx)(n.a,{href:"/basic-features/object-container",children:"Object Container"})," and thus can be obtained in Controllers, Extensions and other classes constructed through OC."]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},3023:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>r});var t=s(3696);const a={},i=t.createContext(a);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);