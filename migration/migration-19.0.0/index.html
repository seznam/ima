<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-migration/migration-19.0.0" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Migration 19.0.0 | IMA.js</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://imajs.io/migration/migration-19.0.0"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Migration 19.0.0 | IMA.js"><meta data-rh="true" name="description" content="Migration &gt; Migration to version 19.0.0"><meta data-rh="true" property="og:description" content="Migration &gt; Migration to version 19.0.0"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://imajs.io/migration/migration-19.0.0"><link data-rh="true" rel="alternate" href="https://imajs.io/migration/migration-19.0.0" hreflang="en"><link data-rh="true" rel="alternate" href="https://imajs.io/migration/migration-19.0.0" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://H3HJGI4FWU-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="IMA.js" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.54bc1051.css">
<script src="/assets/js/runtime~main.87560981.js" defer="defer"></script>
<script src="/assets/js/main.0ba943f7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_oPtH" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="IMA.js, Isomorphic application in javascript" class="themedComponent_siVc themedComponent--light_hHel"><img src="/img/logo.svg" alt="IMA.js, Isomorphic application in javascript" class="themedComponent_siVc themedComponent--dark_yETr"></div><b class="navbar__title text--truncate">IMA.js</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/introduction/getting-started">Docs</a><a class="navbar__item navbar__link" href="/tutorial/introduction">Tutorial</a><a class="navbar__item navbar__link" href="/api">API</a><div class="navbarSearchContainer_bzqh"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://github.com/seznam/ima" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MB5r"><div class="docsWrapper__sE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docRoot_DfVB"><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class="sidebarViewport_KYo0"><div class="sidebar_CUen"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/introduction/getting-started">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/introduction/getting-started">Getting Started with IMA.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/introduction/configuration">Configuration options</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/basic-features/controller-lifecycle">Basic Features</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/controller-lifecycle">Controller lifecycle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/views-and-components">Views &amp; Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/data-fetching">Data fetching</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/basic-features/routing/introduction">Routing</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/extensions">Extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/object-container">Object Container</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/rendering-process">Rendering process</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/handling-scripts-and-styles">Handling scripts and styles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/page-manager">Page Manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/events">Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/page-state">Page State</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/seo-and-meta-manager">SEO &amp; Meta Manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/dictionary">Dictionary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/error-handling">Error Handling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/typescript">TypeScript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-features/testing">Testing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/advanced-features/dynamic-imports">Advanced Features</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/advanced-features/dynamic-imports">Dynamic imports</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/cli/">CLI</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cli/">Introduction to @ima/cli</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cli/compiler-features">Compiler features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cli/ima-config-js">ima.config.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cli/additional-features">Additional features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cli/cli-plugins-api">CLI Plugins API</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/cli/plugins/analyze-plugin">CLI Plugins</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/server/events">Server</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/server/events">Events</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/plugins/plugin-api">Plugins</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/plugins/plugin-api">Plugins API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/plugins/available-plugins">Existing plugins</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/devtools/devtools-introduction">Devtools</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/migration/migration-0.14.0">Migration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/migration/migration-0.14.0">Migration 0.14.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/migration/migration-0.15.0">Migration 0.15.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/migration/migration-0.16.0">Migration 0.16.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/migration/migration-17.0.0">Migration 17.0.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/migration/migration-18.0.0">Migration 18.0.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/migration/migration-19.0.0">Migration 19.0.0</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/contributing/how-to-contribute">Contributing</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/how-to-contribute">How to Contribute</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_a9sJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="docItemContainer_tjFy"><article><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Migration from 18.x.x to 19.0.0</h1></header>
<p>While IMA.js 19 is not as big of a release as previous major version, it brings some potential breaking changes to certain API and removes some deprecated functions. We have also managed to pack some additional new features.</p>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>In addition to new features, <strong>there have been significant updates to TypeScript types in IMA monorepo</strong>. This should allow you to write even better applications in TypeScript, while also benefit from better autocomplete in JS applications.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="migration-guide">Migration Guide<a href="#migration-guide" class="hash-link" aria-label="Direct link to Migration Guide" title="Direct link to Migration Guide">​</a></h2>
<p>The list of changes required to get your app compiled is pretty minimal, however we suggest you take a look at all potential breaking changes in the (full list of changes)[migration-19.0.0.md#breaking-changes].</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="imaserver-updates"><code>@ima/server</code> updates<a href="#imaserver-updates" class="hash-link" aria-label="Direct link to imaserver-updates" title="Direct link to imaserver-updates">​</a></h3>
<ul>
<li><code>@ima/server</code> now contains named exports, change following in <code>./server/app.js</code></li>
</ul>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-js codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// from</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> imaServer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;@ima/server&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createIMAServer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;@ima/server&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> imaServer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createIMAServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Update definition of <code>$Source</code>, <code>$RevivalSettings</code>, <code>$RevivalCache</code>, <code>$Runner</code>, <code>$Styles</code>, <code>$Scripts</code> content variables in <code>spa.ejs</code> and DocumentView. These have been replaced by their lowerFirst counter-parts <code>resource</code> (now replaces <code>$Source</code>), <code>revivalSettings</code>, <code>revivalCache</code>, <code>runner</code>, <code>styles</code>, while <code>$Scripts</code> support have been dropped completely.</li>
<li>Remove <code>urlParser</code> middleware from <code>app.js</code>, it is now part of renderApp middleware as a server hook.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="update-imareact-page-renderer-import">Update <code>@ima/react-page-renderer</code> import<a href="#update-imareact-page-renderer-import" class="hash-link" aria-label="Direct link to update-imareact-page-renderer-import" title="Direct link to update-imareact-page-renderer-import">​</a></h3>
<p>Change <code>ClientPageRenderer</code> import from default to named import.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-js codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// from</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">ClientPageRenderer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ima/react-page-renderer/dist/esm/client/renderer/ClientPageRenderer&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">ClientPageRenderer</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ima/react-page-renderer/renderer/ClientPageRenderer&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="register-new-pagemetahandler">Register new <code>PageMetaHandler</code><a href="#register-new-pagemetahandler" class="hash-link" aria-label="Direct link to register-new-pagemetahandler" title="Direct link to register-new-pagemetahandler">​</a></h3>
<p>Add new <code>PageMetaHandler</code> to <code>PageHandlerRegistry</code> in <code>bind.js</code></p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-js codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token plain">oc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">inject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">PageHandlerRegistry</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token maybe-class-name">PageNavigationHandler</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">PageMetaHandler</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">SspPageHandler</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Optionally remove all meta tag renders from <code>DocumentView</code> and <code>spa.ejs</code> including <code>&lt;title /&gt;</code> tag. These can be replaced with <code>#{meta}</code> content variable,</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="fire-method-params-order-change">Fire method params order change<a href="#fire-method-params-order-change" class="hash-link" aria-label="Direct link to Fire method params order change" title="Direct link to Fire method params order change">​</a></h3>
<p>In v18 after introducting the need for a <code>EventTarget</code> in <code>EventBus.fire</code> methods, we made a mistake with the argument order. In v19 it has been moved to first position to match other event handling methods.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-js codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// from</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">fire</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;fetchDataArticles&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">fire</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;fetchDataArticles&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="removed-duplicates-from-httpagent-settings">Removed duplicates from <code>HttpAgent</code> settings:<a href="#removed-duplicates-from-httpagent-settings" class="hash-link" aria-label="Direct link to removed-duplicates-from-httpagent-settings" title="Direct link to removed-duplicates-from-httpagent-settings">​</a></h3>
<ul>
<li><code>headers</code> have been moved to <code>fetchOptions</code>:</li>
</ul>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-js codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// from</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">$Http</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">defaultRequestOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Set default request headers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">Accept</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&#x27;Accept-Language&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$Language</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">fetchOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">mode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cors&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">$Http</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">defaultRequestOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">fetchOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">mode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cors&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Set default request headers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">Accept</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&#x27;Accept-Language&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$Language</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="full-list-of-changes">Full list of changes<a href="#full-list-of-changes" class="hash-link" aria-label="Direct link to Full list of changes" title="Direct link to Full list of changes">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-features">New features<a href="#new-features" class="hash-link" aria-label="Direct link to New features" title="Direct link to New features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="imacli">@ima/cli<a href="#imacli" class="hash-link" aria-label="Direct link to @ima/cli" title="Direct link to @ima/cli">​</a></h3>
<ul>
<li>Added support for <strong>3rd party source maps</strong> using <code>source-loader</code>, this is usefull especially in error overlay.</li>
<li>Added ability to customize open URL using <code>--openUrl</code> CLI argument or <code>IMA_CLI_OPEN_URL</code> environment variable. For more information see <a href="/cli/#%E2%80%93openurl">--openUrl</a>.</li>
<li><strong>Performance improvement</strong> when building CSS/LESS files (except CSS modules), on <code>server</code> and <code>client</code> bundles. This can add up to 25% built speed improvement depending on the amount of CSS files your project is using.</li>
<li>Added additional CLI output information when <code>forcedLegacy</code> and <code>writeToDisk</code> options are used.</li>
<li>Fixed manifest CSS files regexp, only files from static/css/ folder are now included in final manifest.json file.</li>
<li>Added new export for <code>findRules</code>, this is simple helper function you can use to extract rules from webpack config in yor plugins for easier customization.</li>
<li>Added new export for <code>createWebpackConfig</code>, when provided with CLI args and <code>imaConfig</code>, it generates webpack configurations which are then passed to webpack compiler. This can be usefull for other tooling like StoryBook, where you need to customize different webpack config with fields from the IMA app one</li>
<li>Added additional <code>ImaConfigurationContext</code> variables: <code>isClientES</code>, <code>isClient</code> and <code>outputFolders</code>.</li>
<li><strong>Added support for <code>prepareConfigurations</code> CLI plugin method</strong>, which lets you customize webpack configuration contexts, before generating webpack config from them.</li>
<li><strong>Added new <code>cssBrowsersTarget</code> ima.config.js settings</strong>, this allows you to easily customize postcss-preset-env browsers targets field.</li>
</ul>
<div class="text--center"><p><img decoding="async" loading="lazy" alt="New @ima/cli@19 features" src="/assets/images/imacli_19_features_1-bccacd00b714058c0891eda0a425a4c2.jpg" width="673" height="185" class="img_SS3x"></p></div>
<div class="text--center"><p><img decoding="async" loading="lazy" alt="New @ima/cli@19 features" src="/assets/images/imacli_19_features_2-6db455dfb1f209720f0f48271a0e52be.jpg" width="671" height="188" class="img_SS3x"></p></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="imaplugin-cli">@ima/plugin-cli<a href="#imaplugin-cli" class="hash-link" aria-label="Direct link to @ima/plugin-cli" title="Direct link to @ima/plugin-cli">​</a></h3>
<ul>
<li><strong>Added support for source-maps</strong>, now all files transformed using <code>swc</code> (JS/TS) also produce <code>.map</code> files alongside transformed files.</li>
<li>Added ability to enable/disable source maps generation using <code>sourceMaps</code> option in <code>ima-plugin.config.js</code> configuration file.</li>
<li>Added ability to add new custom transformers using <code>transformers</code> option in<code> ima-plugin.config.js</code> configuration file.</li>
<li>When parsing configuration file the plugin now searches for <code>ima-plugin.config.js</code> files recursively up to filesystem root. This allows to have one custom config file for monorepositories and removes the need of duplicating same config across all package directories.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="imahmr-client">@ima/hmr-client<a href="#imahmr-client" class="hash-link" aria-label="Direct link to @ima/hmr-client" title="Direct link to @ima/hmr-client">​</a></h3>
<ul>
<li>Fixed async issue in HMR, where IMA app could be re-rendered before the old instance finished cleanup.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="imacore">@ima/core<a href="#imacore" class="hash-link" aria-label="Direct link to @ima/core" title="Direct link to @ima/core">​</a></h3>
<ul>
<li>Added new <code>CancelError</code> used for canceling running route handlers.</li>
<li>Fix window history for error action, error pages are now not added to window history.</li>
<li>Package source files now include source map files.</li>
<li>Added <code>RouterEvents.BEFORE_LOADING_ASYNC_ROUTE</code> and <code>RouterEvents.AFTER_LOADING_ASYNC_ROUTE</code> dispatcher events, which you can use to implement custom loaders when routing between async routes (or use it for any other handling).</li>
<li>All exports now use <strong>named exports</strong> (this is technically only package-wide change and does not mean nothing for the end user).</li>
<li>Added multiple new <strong>TS types</strong>, while also fixing existing types. Since rewriting IMA.js to typescript has been huge task, there may still be some type inconsistencies which we will try to fix in following releases to further improve TS experience in IMA.js ecosystem.</li>
<li>Added new <code>onRun</code> event to <code>window.$IMA.Runner</code>.</li>
<li>Add new methods <code>isClientError()</code> and <code>isRedirection()</code> to <code>GenericError</code>.</li>
<li><code>getRouteHandlersByPath()</code> method on <code>AbstractRouter</code> is now public. This return&#x27;s middlewares and route for given path.</li>
<li>Fixed HttpAgent types -&gt; data in method arguments should be optional</li>
<li>Fixed missing transaction cleanup in PageStateManager</li>
<li>Fix missing optional parameters in static router that were evaluated as undefined instead of &#x27;undefined&#x27;.</li>
<li>Added autocompletion support for language file keys in localization functions. To be able to use this function, update <code>jsconfig.json</code>/<code>tsconfig.json</code> according to the documentation (adding <code>./build/tmp/types/**/*&quot;</code> path to <code>include</code> field should suffice).</li>
<li>Controller and Extension event bus methods can be targeted with prefix. Prefix is set by static field in controller/extension class e.g. <code>$name = &#x27;ArticleController&#x27;</code>;. Event is then <code>ArticleController.eventName</code>:</li>
</ul>
<div class="language-javascript codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_x_ju">./app/page/article/ArticleController.js</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-javascript codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ArticleController</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> $name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ArticleController&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">onExpand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> expandableId </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">expandableId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-javascript codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_x_ju">./app/component/expandable/ExpandLink.jsx</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-javascript codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">ExpandLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">onClick</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> expandableId </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">fire</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ArticleController.expand&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> expandableId </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="router-changes">Router changes<a href="#router-changes" class="hash-link" aria-label="Direct link to Router changes" title="Direct link to Router changes">​</a></h4>
<ul>
<li>Added middleware execution timeout =&gt; all middlewares must execute within this defined timeframe (defaults to 30s). This can be customized using <code>$Router.middlewareTimeout</code> app settings.</li>
<li>Router middlewares now support <code>next</code> callback, which when defined, has to be called, otherwise the middleware will eventually timeout and not proceed any further. This enables some additional features, where you are able to stop route processing by not calling the <code>next</code> function if desired.</li>
<li><strong>Middlewares can now return object value</strong>, which will be merged to the locals object, received as a second argument in middleware function. Middlewares wich <code>next</code> callback function can &quot;return&quot; additional locals by calling <code>next</code> with an argument.</li>
</ul>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-js codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token plain">router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">params</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> locals</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">counter</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> counter</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>For more information about middlewares see <a href="/basic-features/routing/middlewares">middlewares section</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="imareact-page-renderer">@ima/react-page-renderer<a href="#imareact-page-renderer" class="hash-link" aria-label="Direct link to @ima/react-page-renderer" title="Direct link to @ima/react-page-renderer">​</a></h3>
<ul>
<li>Package source files now include source map files.</li>
<li>Fixed once hook parametr type.</li>
<li>Moved meta tags management to new PageMetaHandler, see <a href="/basic-features/seo-and-meta-manager">Seo and Meta Manager</a> section for new updates to meta manager.</li>
<li>IMA specific React hooks have been rewritten to <strong>TypeScript</strong>.</li>
<li>Added package exports of multiple missing TS types and other interfaces (this provides better support for writing your applications in TS).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="imaerror-overlay">@ima/error-overlay<a href="#imaerror-overlay" class="hash-link" aria-label="Direct link to @ima/error-overlay" title="Direct link to @ima/error-overlay">​</a></h3>
<ul>
<li>Fixed an issue where invalid Error params caused circular dependency error.</li>
<li>Fixed an issue where errors, that occurred before error overlay is initialized were not reported to the error overlay.</li>
<li>Reduced number of levels that are expanded by default in error overlay error params view.</li>
<li>Added ability to hide/show error params, this settings is saved to local storage.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="imaserver">@ima/server<a href="#imaserver" class="hash-link" aria-label="Direct link to @ima/server" title="Direct link to @ima/server">​</a></h3>
<ul>
<li>Style content variable now automatically generates preload links for app styles.</li>
<li>Added new metric - <strong>concurrent requests</strong> to monitoring.</li>
<li>Add information about error cause in places, where we used to throw away this information.</li>
<li>Add routeName key to res.locals instead of res.$IMA, since res.$IMA should not be used anymore.</li>
<li>Added <code>X-Request-ID</code> to revival settings. Can be accessed through <code>$IMA.$RequestID</code>. This can be usefull to match same requests between client and server instances.</li>
<li>Added <strong>XSS protection</strong> to <strong>host</strong> and <strong>protocol</strong> in revival settings.</li>
<li>Add support for Client Errors and Redirects when serving static error pages.</li>
<li>Added option to <strong>force app host</strong> and <strong>protocol</strong>, using <code>$Server.host</code> and <code>$Server.protocol</code> settings in the <code>environment.js</code>. (These 2 values can also be functions).</li>
<li>The App error route is protected for exceeding static thresholds.</li>
<li>The Emitter <code>event.cause</code> is removed. The error cause is set in <code>event.error.cause</code>.</li>
<li>Fixed issue with dummyApp forcing &#x27;en&#x27; language, which fails to resolve on applications with different language settings.</li>
<li>Fixed issue where server redirect showed ErrorOverlay in debug mode.</li>
<li>The instances of <code>$Dispatcher</code>, <code>$Cache</code>, <code>$PageRenderer</code> and <code>$PageManager</code> are cleared after server sending response. Clearing PageManager cause calling <code>destroy</code> lifecycle method of controller and extensions on server.</li>
<li>Add option to use custom <code>manifestRequire</code>.</li>
<li>SPA blacklist config is omitted for using degradation isSPA method when decision serving SPA page.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="create-ima-app">create-ima-app<a href="#create-ima-app" class="hash-link" aria-label="Direct link to create-ima-app" title="Direct link to create-ima-app">​</a></h3>
<ul>
<li>Added new <strong>typescript template</strong>, use <code>--typescript</code> option when generating new application.</li>
<li>Migrated from default to named exports.</li>
<li>Fixed default static path and public path settings.</li>
<li>Updated environment.js and settings.js to support new IMA19 features.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="breaking-changes">Breaking Changes<a href="#breaking-changes" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="imacli-1">@ima/cli<a href="#imacli-1" class="hash-link" aria-label="Direct link to @ima/cli" title="Direct link to @ima/cli">​</a></h3>
<ul>
<li>Removed <code>isESVersion</code> <code>ImaConfigurationContext</code> variable (use <code>isClientES</code> instead).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="imacore-1">@ima/core<a href="#imacore-1" class="hash-link" aria-label="Direct link to @ima/core" title="Direct link to @ima/core">​</a></h3>
<ul>
<li><code>AbstractRouter.manage</code> method no longer has controller and view properties in an object argument.</li>
<li>Multiple changes in router route handling and page manager with a goal of implementing ability to cancel running handlers before handling a new ones. This results in much more stable routing specifically when using async routes. Each route should now be executed &quot;<strong>sequentially</strong>&quot; where BEFORE/AFTER_HANDLE_ROUTE router events should always fire in correct order. Also if you quickly move between different routes, without them finishing loading, the page manager is able to cancel it&#x27;s executing mid handling and continue with a new route, which results in faster and more stable routing. While this change is essentially not a breaking change, since it only changes our internal API, it could possibly result in some new behavior.</li>
<li>Removed <code>ExtensibleError</code>.</li>
<li><code>StatusCode</code> has been renamed to <code>HttpStatusCode</code>.</li>
<li><code>$Source</code> environment.js variable has been renamed to <code>$Resources</code>.</li>
<li>Removed deprecated package <strong>entry points</strong>, this includes all imports directly referencing files from <code>./dist/</code> directory. Please update your imports to the new <a href="https://github.com/seznam/ima/blob/master/packages/core/package.json#L39" target="_blank" rel="noopener noreferrer">exports fields</a>.</li>
<li><code>extractParameters()</code> function in <code>DynamicRoute</code> now receives additional object argument, containing <code>query</code> and <code>path</code> (not modified path) for more control over extracted parameters. <strong>The router now uses params returned from <code>extractParameters()</code> directly</strong>. It no longer automatically merges query params into the resulting object. If you want to preserve this behavior, merge the extracted route params with query object provided in the second argument.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="router-changes-1">Router changes<a href="#router-changes-1" class="hash-link" aria-label="Direct link to Router changes" title="Direct link to Router changes">​</a></h4>
<ul>
<li>Replace custom URL parsing methods in <code>AbstractRoute</code>, <code>StaticRoute</code> and <code>DynamicRoute</code> with combination of native <code>URL</code> and <code>URLSearchParams</code>.</li>
<li>Removed <code>pairsToQuery</code>, <code>paramsToQuery</code>, <code>getQuery</code>, <code>decodeURIParameter</code> static methods on <code>AbstractRoute</code>. These have been replaced with combination of native <code>URL</code> and <code>URLSearchParams</code> interfaces.</li>
<li><code>getTrimmedPath</code> static method in <code>AbstractRoute</code> is now instance method.</li>
<li>Url query params with no value (<code>?param=</code>) are no longer extracted as <code>{ param: true }</code>, but as <code>{ param: &#x27;&#x27; }</code>. Please update your code to check for <code>key</code> presence in these cases rather than <code>true</code> value.</li>
<li>Parsing of semi-colons inside query params is not supported (as a result of using <code>URLSearchParams</code>)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="httpagent-changes">HttpAgent changes<a href="#httpagent-changes" class="hash-link" aria-label="Direct link to HttpAgent changes" title="Direct link to HttpAgent changes">​</a></h4>
<ul>
<li><code>IMA HttpAgent</code> now removes by default all headers from request and response which is stored in Cache. You can turn off this behavior with <code>keepSensitiveHeaders</code> option but <strong>it is not recommended</strong>.</li>
<li>Removed support for HttpAgent options.listener (these were used mainly in plugin-xhr, which is now unsupported)</li>
<li>You can now define multiple <code>postProcessors[]</code> in <code>HttpAgent</code> options. This replaces old <code>postProcessor</code> option, if you are using any post processor you need to update your options to postProcessors and make sure to wrap this post processor in an array.</li>
<li>Remove older, conflicting settings of <code>HttpAgent</code>, <code>withCredentials</code>, <code>headers</code>, and <code>listeners</code>. The first two now conflict with the newer <code>options.fetchOptions</code>, the last one (<code>listeners</code>) has been removed completely. <code>options.withCredentials</code> and <code>options.headers</code> are no longer followed. Use <code>options.fetchOptions.credentials</code> and <code>options.fetchOptions.headers</code> instead. For definition, see the native Fetch API (note: for simplicity, <code>options.fetchOptions.headers</code> only accepts headers defined by an object, not a tuple or an instance of Headers).</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="metamanager-changes">MetaManager changes<a href="#metamanager-changes" class="hash-link" aria-label="Direct link to MetaManager changes" title="Direct link to MetaManager changes">​</a></h4>
<ul>
<li>Rewritten meta tag management in SPA mode, <strong>all MetaManager managed tags are removed between pages while new page contains only those currently defined using setMetaParams function in app controller</strong>. This should make meta tags rendering more deterministic, while fixing situations where old meta tags might be left on the page indefinitely if not cleaner properly.</li>
<li>MetaManager getters now always return object with key=value pairs of their set value. This should make settings additional meta attributes in loops much easier (for example: <code>getMetaProperty(&#x27;og:title&#x27;); -&gt; { property: &#x27;property-value&#x27; });</code>)</li>
<li>Meta values/attributes with null/undefined values are not rendered, other values are converted to string.</li>
<li>Added new <strong>iterator functions</strong> to MetaManager.</li>
</ul>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-js codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">#metaManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getMetaNamesIterator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">#metaManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getMetaPropertiesIterator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">#metaManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getLinksIterator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Added ability to set <strong>additional attributes</strong> for meta tags/links in meta manager:</li>
</ul>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-js codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">#metaManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;lcp-image&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> media</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&#x27;lcp-image-imagesizes&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> media</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sizes</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&#x27;lcp-image-imagesrcset&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> media</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">srcSet</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="imareact-page-renderer-1">@ima/react-page-renderer<a href="#imareact-page-renderer-1" class="hash-link" aria-label="Direct link to @ima/react-page-renderer" title="Direct link to @ima/react-page-renderer">​</a></h3>
<ul>
<li>Removed deprecated package <strong>entry points</strong>, this includes all imports directly referencing files from <code>./dist/</code> directory. Please update your imports to the new <a href="https://github.com/seznam/ima/blob/master/packages/react-page-renderer/package.json#L23" target="_blank" rel="noopener noreferrer">exports fields</a>.</li>
<li><code>isSSR</code> hook has been removed, use <code>window.isClient()</code> directly from <code>useComponentUtils()</code>.</li>
<li><code>useSettings</code> now returns <code>undefined</code>, when settings is not found when using <code>selector</code> namespace as an argument.</li>
<li>All exports are now <strong>named exports</strong>, you need to update import to <code>ClientPageRenderer</code> in bind.js to:</li>
<li>Changed signature of <code>useWindowEvent</code> hook, it now matches bindEventListener parameters of ima window.</li>
</ul>
<div class="language-javascript codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-javascript codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">ClientPageRenderer</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@ima/react-page-renderer/renderer/ClientPageRenderer&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Change order of method arguments in Component <code>fire</code> method. <code>target</code> has been moved to the first argument position.</li>
</ul>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-js codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// from</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">fire</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;fetchDataArticles&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">fire</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;fetchDataArticles&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="imadev-utils">@ima/dev-utils<a href="#imadev-utils" class="hash-link" aria-label="Direct link to @ima/dev-utils" title="Direct link to @ima/dev-utils">​</a></h3>
<ul>
<li>Package now uses <code>exports</code> fields, instead of <code>./dist/*</code> imports. <a href="https://github.com/seznam/ima/blob/master/packages/dev-utils/package.json#L20" target="_blank" rel="noopener noreferrer">See package.json</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="imaserver-1">@ima/server<a href="#imaserver-1" class="hash-link" aria-label="Direct link to @ima/server" title="Direct link to @ima/server">​</a></h3>
<ul>
<li>Update @esmj/monitor to 0.5.0 with breaking change for returns value from subscribe method where returns subscription is object with unsubscribe method.</li>
<li>Migrated urlParser middleware to ima server BeforeRequest hook. Remove <code>urlParser</code> middleware from <code>app.js</code>, it is now part of <code>renderApp</code> middleware.</li>
<li>Dropped support for direct <code>response.contentVariables</code> mutations, use <code>event.result</code> and return values in <code>CreateContentVariables</code> event.</li>
<li>Dropped support for <code>$Source</code>, <code>$RevivalSettings</code>, <code>$RevivalCache</code>, <code>$Runner</code>, <code>$Styles</code>, <code>$Scripts</code> content variables. These have been replaced by their lowerFirst counter-parts <code>resource</code> (now replaces <code>$Source</code>), <code>revivalSettings</code>, <code>revivalCache</code>, <code>runner</code>, <code>styles</code>, while <code>$Scripts</code> support have been dropped completely.</li>
<li>Default resources in <code>$Resources</code> now produce <code>styles</code> and <code>esStyles</code> fields (should not break anything in 99% of the applications). This does not necessarily mean which should be loaded on which <code>es</code> version, but what bundle produced those styles. This also means that without any custom configuration, all styles should now be under <code>esStyles</code> key, since they are built in client.es webpack bundle. This change was made to enable built of 2 CSS bundles simliar to how we handle ES bundles. This can be enabled using <code>@ima/cli-plugin-legacy-css</code>.</li>
<li>The package now provides multiple additional exports using named exports, the deafult export has been replaced with named <code>createIMAServer</code> function.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/seznam/ima/tree/master/docs/../docs/migration/migration-19.0.0.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bHB7" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_ydrU"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-07-23T12:31:24.000Z" itemprop="dateModified">Jul 23, 2025</time></b> by <b>Anna Frankova (corvidism)</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/migration/migration-18.0.0"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Migration 18.0.0</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/contributing/how-to-contribute"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How to Contribute</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#migration-guide" class="table-of-contents__link toc-highlight">Migration Guide</a><ul><li><a href="#imaserver-updates" class="table-of-contents__link toc-highlight"><code>@ima/server</code> updates</a></li><li><a href="#update-imareact-page-renderer-import" class="table-of-contents__link toc-highlight">Update <code>@ima/react-page-renderer</code> import</a></li><li><a href="#register-new-pagemetahandler" class="table-of-contents__link toc-highlight">Register new <code>PageMetaHandler</code></a></li><li><a href="#fire-method-params-order-change" class="table-of-contents__link toc-highlight">Fire method params order change</a></li><li><a href="#removed-duplicates-from-httpagent-settings" class="table-of-contents__link toc-highlight">Removed duplicates from <code>HttpAgent</code> settings:</a></li></ul></li><li><a href="#full-list-of-changes" class="table-of-contents__link toc-highlight">Full list of changes</a></li><li><a href="#new-features" class="table-of-contents__link toc-highlight">New features</a><ul><li><a href="#imacli" class="table-of-contents__link toc-highlight">@ima/cli</a></li><li><a href="#imaplugin-cli" class="table-of-contents__link toc-highlight">@ima/plugin-cli</a></li><li><a href="#imahmr-client" class="table-of-contents__link toc-highlight">@ima/hmr-client</a></li><li><a href="#imacore" class="table-of-contents__link toc-highlight">@ima/core</a><ul><li><a href="#router-changes" class="table-of-contents__link toc-highlight">Router changes</a></li></ul></li><li><a href="#imareact-page-renderer" class="table-of-contents__link toc-highlight">@ima/react-page-renderer</a></li><li><a href="#imaerror-overlay" class="table-of-contents__link toc-highlight">@ima/error-overlay</a></li><li><a href="#imaserver" class="table-of-contents__link toc-highlight">@ima/server</a></li><li><a href="#create-ima-app" class="table-of-contents__link toc-highlight">create-ima-app</a></li></ul></li><li><a href="#breaking-changes" class="table-of-contents__link toc-highlight">Breaking Changes</a><ul><li><a href="#imacli-1" class="table-of-contents__link toc-highlight">@ima/cli</a></li><li><a href="#imacore-1" class="table-of-contents__link toc-highlight">@ima/core</a><ul><li><a href="#router-changes-1" class="table-of-contents__link toc-highlight">Router changes</a></li><li><a href="#httpagent-changes" class="table-of-contents__link toc-highlight">HttpAgent changes</a></li><li><a href="#metamanager-changes" class="table-of-contents__link toc-highlight">MetaManager changes</a></li></ul></li><li><a href="#imareact-page-renderer-1" class="table-of-contents__link toc-highlight">@ima/react-page-renderer</a></li><li><a href="#imadev-utils" class="table-of-contents__link toc-highlight">@ima/dev-utils</a></li><li><a href="#imaserver-1" class="table-of-contents__link toc-highlight">@ima/server</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 1996 - 2025 Seznam.cz a. s.</div></div></div></footer></div>
</body>
</html>